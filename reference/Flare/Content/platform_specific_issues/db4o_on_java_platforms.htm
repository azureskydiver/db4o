<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="4" MadCap:lastHeight="1417" MadCap:lastWidth="680" MadCap:conditions="Primary.Java,Primary.All languages" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery;extObjectContainer;setSemaphore;getName;SetSemaphore;typeof;LOCK_;getID;GetID;getPilot;getSignature;idenity;car1;car2;car3;UUID;defragment;startsWith;getPoints;StartsWith;ExtentType;oql;AllPilots;OQLQuery;persistenceManager;newQuery;IList;IComparer;ObjectSet;IObjectSet;comparer;ExtObjectContainer;IExtObjectContainer;VB;pilot1;name1;name2;peekPersisted;isCached;JDO;WeakReferences;VM;ClientConfiguration;IClientConfiguration;BatchMessages;NO_OF_OBJECTS;maxBatchQueueSize;MaxBatchQueueSize;listResult;MessageRecipient;ObjectServer;openServer;ObjectNotStorableException;s;clientserverJava;ServerConfiguration;clientserverCS;cs;clientserverVB;vb;config;databaseFileName;int;NativeSocketFactory;socketFactory;OpenClient;hostName;IObjectServer;OpenServer;IConfiguration;INativeSocketFactory;IObjectContainer;genkey;SSLcert;storepass;SecureSocketFactory;IMessageSender;setMessageRecipient;SetMessageRecipient;IMessageRecipient;processMessage;ProcessMessage;ByVal;UpdateServer;waitMilliSeconds;releaseSemaphore;ReleaseSemaphore;monitorObject;semaphoreName;switchToFile;fileName;SwitchToFile;switchToMainFile;SwitchToMainFile;switchs;isAlive;IsAlive;replicateDeletions;ReplicateDeletions;GetType;g;ReplicationEvent;VersionNumbers;providerA;objectsChangedSinceLastReplication;ProviderA;ObjectsChangedSinceLastReplication;hbm;ProviderSignature;MySignature;PeerSignature;ReplicationProvider;HibernateReplicationProvider;ReplicationProviders;m;typed_id;pi2763;longPart;ObjectReference;className;typedId;Uuid;uuid;drs_providers;is_my_sig;t';f';drs_history;provider_id;PK;drs_objects;class_name;varchar;one_to_one;ReplicationConfigurator;SessionFactory;sessionFactory;buildSessionFactory;openSession;beginTransaction;createCriteria;AbstractDb4oTestCase;Db4oFixture;_fixture;AbstractSoloDb4oFixture;AbstractClientServerDb4oFixture;IDb4oFixture;IQuery;NewQuery;retrieveOnlyInstance;RetrieveOnlyInstance;countOccurences;CountOccurences;foreach;Visitor4;Foreach;IVisitor4;obj;deleteAll;DeleteAll;ReflectClass;reflectClass;indexField;fieldName;IndexField;Config;setUp;SetUp;db4oSetupBeforeStore;db4oSetupAfterStore;Db4oSetupBeforeStore;Db4oSetupAfterStore;runSoloAndClientServer;RunSoloAndClientServer;runSolo;RunSolo;runClientServer;RunClientServer;CodeBlock;Db4oUnit;ICodeBlock;isTrue;msg;IsTrue;bool;Msg;areEqual;AreEqual;FrameworkTestCase;runTestAndExpect;expFailures;RunTestAndExpect;ITest;GetConfig;storedType;runtimeType;tAlias;resolveRuntimeName;resolveStoredName;storedPattern;runtimePattern;aliasing;QueryStarted;QueryFinished;QueryEventArgs;ObjectEventArgs;CancellableObjectEventArgs;CommitEventArgs;client2;client1;WaitForCompletion;args;AddHandler;forObjectContainer;ForObjectContainer;OnCreated;createdEvent;onEvent;Event4;ABC0001DEF;MustInherit;CountedObject;IncrementedId;queryStarted;queryFinished;QueryStats;q;executionTime;activationCount;storedClass;Foo;classname;storedClasses;StoredClasses;getStoredFields;GetStoredFields;storedField;getParentStoredClass;GetParentStoredClass;reflectWith;Db4oFactory;ReflectWith;self_get;self_set;LoggingReflector;IoAdapter;MyEncryptionAdapter;Io;Db4oEnhancerMSBuildTask;SensorPanel;GetOptions;UsingTask;AssemblyFile;OutputPath;TaskName;ItemGroup;Db4oEnhance;TargetPath;AfterBuild;AbstractAssemblyInstrumentation;IAssemblyInstrumentation;TAInstrumentation;tp;EnhancementExample;tacustom;Db4oPersistent;typedef;classTargetDir;jarTargetDir;MaintenanceQueue;'Barrichello';'BMW';useIndexSystem;useRamSystem;discardSmallerThan;DiscardSmallerThan;allObjects;SumPilotPoints;SelectMinPointsPilot;AveragePilotPoints;CountSubGroups;SelectPilotsAndTrainees;SelectPilotsInRange;SelectAndChangePilots;SelectTestPilots6PointsMore;SelectPilots6To12Points;SelectPilotsRandom;SelectPilotsEven;SelectAnyOnePilot;SelectDistinctPilots;SelectAllPilots;SelectAllPilotsNonGeneric;GetSortedPilots;GetPilotsSortByNameAndPoints;GetPilotsSortWithComparator;SelectPilot5Points;SelectTestPilots;SelectPilotsNumberX6;newPackage;newClass;objectField;oldField;newField;newAssembly;ObjectField;aaplication">
    <head><title>db4o on Java Platforms	<link href="../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>db4o on Java Platforms</h1><a name="All Java"></a>
        <h2>All Java</h2>
        <ul>
            <li>root package is com.db4o</li>
        </ul><a name="JDK1.1"></a>
        <h2>JDK1.1</h2>
        <p>The major limitations of db4o for JDK1.1:</p>
        <ul>
            <li>
                <p>no support for storing private fields (reflection in JDK 1.1 can only work on public fields) </p>
            </li>
        </ul>
        <ul>
            <li>
                <p>no support for JDK collections (java.util.list since JDK1.2) </p>
            </li>
        </ul>
        <ul>
            <li>
                <p>no support for weak references</p>
            </li>
        </ul>db4o for Java 1.1 also goes without support for Native Query Optimization. NQ optimization uses bytecode optimizer library Bloat (http://www.cs.purdue.edu/s3/projects/bloat/), which is not JDK1.1 compatible. 
<a name="JDK1.2 - JDK 1.3"></a><h2>JDK1.2 - JDK 1.3 </h2><p>Java JDKs after version 1.1 are free of JDK1.1 limitations mentioned above. You can also use Native Query Optimization since JDK1.2.</p><p>The main limitation of JDK1.2 - 1.3 is the lack of file locking functionality. As it is necessary to lock the database file in use, db4o simulates locking files by using a timer thread that writes access time to the file. This can be quite slow.  </p><a name="JDK 1.4"></a><h2>JDK 1.4</h2><p>File locking functionality is available since JDK1.4. For the versions prior to JDK1.4 an expensive database locking simulation is used, which can considerably affect the performance. The file locking simulation can be switched off to improve the performance on versions prior to JDK1.4, though this setting can potentially result in a corrupted database:

</p><p><code>Db4o.configure().lockDatabaseFile(false)</code></p><p>Db4o can bypass the constructors declared for the class using platform-specific mechanisms. (For Java, this option is only available on JREs &gt;= 1.4.) This mode allows reinstantiating objects even when their class doesn't provide a suitable constructor. For more information see <a href="../object_lifecycle/object_construction.htm">Constructors chapter</a></p><p>If this option is available in the current runtime environment, it will be the default setting.</p><a name="JDK 1.5"></a><h2>JDK 1.5</h2><ul><li>Generics support introduced in JDK1.5 makes db4o Native Query syntax much simpler: <code>List &lt;Pilot&gt; pilots = db.query(new Predicate &lt;Pilot&gt;
() { public boolean match(Pilot pilot) { return pilot.getPoints() == 100;}});</code></li><li>following JDK5 annotations db4o introduces its own annotations.</li><li>you can use built-in enums</li><li>db4o for JDK5 also has replication support.</li></ul><a name="Mobile Java editions"></a><h2>Mobile Java editions</h2><p>Currently db4o runs on J2ME dialects that support reflection, such as Personal Java, J2ME CDC and J2ME PersonalProfile. PersonalJava is closely equivalent to Java 1.1.8 regarding the libraries and features it contains (see JDK1.1 for the list of limitations). Use db4o-<MadCap:variable name="Primary.CurrentVersion" />-java1.1.jar with PersonalJava.</p><p>J2ME CDC and J2ME PersonalProfile are based on subsets of JDK1.3 or JDK1.4 depending on the version used.</p><p>J2ME CLDC and MIDP are not yet supported. Their support requires:</p><ul><li>replacing reflection (not available in CLDC) with a build-time preprocessor</li></ul><ul><li>providing RMS RecordStore based I/O</li></ul><a name="Which db4o Java version to use"></a><h2>Which db4o Java version to use?</h2><p>Db4o comes with several
jars supporting different java versions. Together with the advanced features of
higher Java versions db4o provides valuable improvements to its functionality
(see the comparison above). </p><p>To get the best
functionality you must use the highest db4o java version that your virtual
machine supports:</p>
			<p><table><tr><td><b>Java versions</b></td><td><b>Recommended db4o jar </b></td></tr><tr><td>JRE1.1</td><td>db4o-<MadCap:variable name="Primary.CurrentVersion" />-java1.1.jar</td></tr><tr><td>JRE1.2, JRE1.3, JRE1.4</td><td>db4o-<MadCap:variable name="Primary.CurrentVersion" />-java1.2.jar</td></tr><tr><td>JRE5, JRE6</td><td>db4o-<MadCap:variable name="Primary.CurrentVersion" />-java5.jar</td></tr></table></p>
			
			<p>&#160;</p><p>When you use JRE1.4 you should use db4o-<MadCap:variable name="Primary.CurrentVersion" />-java1.2.jar with database locking
simulation disabled:</p><p><code>configuration.file().lockDatabaseFile(false)</code></p><p>This will improve the performance dramatically,
because JRE1.4 provides a built-in functionality to lock database files and the
costly db4o database locking simulation is not needed.</p></body>
</html>