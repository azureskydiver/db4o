<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="9" MadCap:lastHeight="1283" MadCap:lastWidth="547" MadCap:conditions="Primary.Java,Primary.All languages" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery;extObjectContainer;setSemaphore;getName;SetSemaphore;typeof;LOCK_;getID;GetID;getPilot;getSignature;idenity;car1;car2;car3;UUID;defragment;startsWith;getPoints;StartsWith;ExtentType;oql;AllPilots;OQLQuery;persistenceManager;newQuery;IList;IComparer;ObjectSet;IObjectSet;comparer;ExtObjectContainer;IExtObjectContainer;VB;pilot1;name1;name2;peekPersisted;isCached;JDO;WeakReferences;VM;ClientConfiguration;IClientConfiguration;BatchMessages;NO_OF_OBJECTS;maxBatchQueueSize;MaxBatchQueueSize;listResult;MessageRecipient;ObjectServer;openServer;ObjectNotStorableException;s;clientserverJava;ServerConfiguration;clientserverCS;cs;clientserverVB;vb;config;databaseFileName;int;NativeSocketFactory;socketFactory;OpenClient;hostName;IObjectServer;OpenServer;IConfiguration;INativeSocketFactory;IObjectContainer;genkey;SSLcert;storepass;SecureSocketFactory;IMessageSender;setMessageRecipient;SetMessageRecipient;IMessageRecipient;processMessage;ProcessMessage;ByVal;UpdateServer;waitMilliSeconds;releaseSemaphore;ReleaseSemaphore;monitorObject;semaphoreName;switchToFile;fileName;SwitchToFile;switchToMainFile;SwitchToMainFile;switchs;isAlive;IsAlive;replicateDeletions;ReplicateDeletions;GetType;g;ReplicationEvent;VersionNumbers;providerA;objectsChangedSinceLastReplication;ProviderA;ObjectsChangedSinceLastReplication;hbm;ProviderSignature;MySignature;PeerSignature;ReplicationProvider;HibernateReplicationProvider;ReplicationProviders;m;typed_id;pi2763;longPart;ObjectReference;className;typedId;Uuid;uuid;drs_providers;is_my_sig;t';f';drs_history;provider_id;PK;drs_objects;class_name;varchar;one_to_one;ReplicationConfigurator;SessionFactory;sessionFactory;buildSessionFactory;openSession;beginTransaction;createCriteria;AbstractDb4oTestCase;Db4oFixture;_fixture;AbstractSoloDb4oFixture;AbstractClientServerDb4oFixture;IDb4oFixture;IQuery;NewQuery;retrieveOnlyInstance;RetrieveOnlyInstance;countOccurences;CountOccurences;foreach;Visitor4;Foreach;IVisitor4;obj;deleteAll;DeleteAll;ReflectClass;reflectClass;indexField;fieldName;IndexField;Config;setUp;SetUp;db4oSetupBeforeStore;db4oSetupAfterStore;Db4oSetupBeforeStore;Db4oSetupAfterStore;runSoloAndClientServer;RunSoloAndClientServer;runSolo;RunSolo;runClientServer;RunClientServer;CodeBlock;Db4oUnit;ICodeBlock;isTrue;msg;IsTrue;bool;Msg;areEqual;AreEqual;FrameworkTestCase;runTestAndExpect;expFailures;RunTestAndExpect;ITest;GetConfig;storedType;runtimeType;tAlias;resolveRuntimeName;resolveStoredName;storedPattern;runtimePattern;aliasing;QueryStarted;QueryFinished;QueryEventArgs;ObjectEventArgs;CancellableObjectEventArgs;CommitEventArgs;client2;client1;WaitForCompletion;args;AddHandler;forObjectContainer;ForObjectContainer;OnCreated;createdEvent;onEvent;Event4;ABC0001DEF;MustInherit;CountedObject;IncrementedId;queryStarted;queryFinished;QueryStats;q;executionTime;activationCount;storedClass;Foo;classname;storedClasses;StoredClasses;getStoredFields;GetStoredFields;storedField;getParentStoredClass;GetParentStoredClass;reflectWith;Db4oFactory;ReflectWith;self_get;self_set;LoggingReflector;IoAdapter;MyEncryptionAdapter;Io;Db4oEnhancerMSBuildTask;SensorPanel;GetOptions;UsingTask;AssemblyFile;OutputPath;TaskName;ItemGroup;Db4oEnhance;TargetPath;AfterBuild;AbstractAssemblyInstrumentation;IAssemblyInstrumentation;TAInstrumentation;tp;EnhancementExample;tacustom;Db4oPersistent;typedef;classTargetDir;jarTargetDir;MaintenanceQueue;'Barrichello';'BMW';useIndexSystem;useRamSystem;discardSmallerThan;DiscardSmallerThan;allObjects;SumPilotPoints;SelectMinPointsPilot;AveragePilotPoints;CountSubGroups;SelectPilotsAndTrainees;SelectPilotsInRange;SelectAndChangePilots;SelectTestPilots6PointsMore;SelectPilots6To12Points;SelectPilotsRandom;SelectPilotsEven;SelectAnyOnePilot;SelectDistinctPilots;SelectAllPilots;SelectAllPilotsNonGeneric;GetSortedPilots;GetPilotsSortByNameAndPoints;GetPilotsSortWithComparator;SelectPilot5Points;SelectTestPilots;SelectPilotsNumberX6;newPackage;newClass;objectField;oldField;newField;newAssembly;ObjectField;aaplication">
    <head><title>Android	<link href="../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>
            <MadCap:keyword term="Platform:Android" />Android</h1>
        <p><a href="http://code.google.com/android/index.htm">Android</a> is a new complete, open and free mobile platform. Android offers developers a java based software developer kit with lots of helpful APIs, including geolocational services. Of course, there is a database support as well: Android has a built-in support for SQLite database. The basic API is similar to standard JDBC API, however some effort was added to create some convenience methods:<br /></p>
        <p><code>public int delete(String table, String whereClause, <br />String[] whereArgs)<br /></code>
        </p>
        <p><code>public long insert(String table, String nullColumnHack, <br /><a href="http://code.google.com/android/reference/android/content/ContentValues.htm">ContentValues</a> values)<br /></code>
        </p>
        <p><code>public <a href="http://code.google.com/android/reference/android/database/Cursor.htm">Cursor</a> query(boolean distinct, String table, String[] columns, String selection, String[] selectionArgs, <br />String groupBy, String having, String orderBy)<br /></code>
        </p>
        <p><code>public long replace(String table, String nullColumnHack, <br /><a href="http://code.google.com/android/reference/android/content/ContentValues.htm">ContentValues</a> initialValues)<br /></code>
        </p>
        <p>This may look better than SQL, but if you look closer you can see that all column names and selection criteria are specified as strings, so we still stay with a problem of run-time checking instead of compile-time. </p>
        <p>Luckily even for this very early Android release we already have an alternative - db4o. Yes, db4o runs on Android out of the box and produces very competitive results as well. The following application compares db4o and SQLite usage for basic operations. It also contains some operation duration calculations that can be used to compare db4o vs SQLite performance. Please, note that these results are for an overview purpose only and there are many configuration settings that can change performance of both databases. Also running in emulator does not guarantee the same results as in real device. <MadCap:conditionalText MadCap:conditions="Primary.Online">You can download the whole application code <a href="android/dbcomparerefjava.zip">here</a></MadCap:conditionalText>.</p>
        <p>More Reading:<ul><li><p><a href="android/general_info.htm">General Info</a></p></li><li><p><a href="android/application_structure.htm">Application Structure</a></p></li><li><p><a href="android/opening_a_database.htm">Opening A Database</a></p></li><li><p><a href="android/storing_data.htm">Storing Data</a></p></li><li><p><a href="android/retrieving_data.htm">Retrieving Data</a></p></li><li><p><a href="android/changing_data.htm">Changing Data</a></p></li><li><p><a href="android/deleting_data.htm">Deleting Data</a></p></li><li><p><a href="android/backup.htm">Backup</a></p></li><li><p><a href="android/closing_a_database.htm">Closing A Database</a></p></li><li><p><a href="android/schema_evolution.htm">Schema Evolution</a></p></li><li><p><a href="android/car.htm">Car</a></p></li><li><p><a href="android/pilot.htm">Pilot</a></p></li></ul></p><a name="Step by Step installation"></a>
        <h4>Step by Step installation</h4>
        <p>The steps to install db4o on Android are quite simple thanks to Eclipse.</p>
        <ol>
            <li>Point your browser to <a href="http://developer.db4o.com/Downloads.aspx">http://developer.db4o.com/Downloads.aspx</a>. Here you have to choose stable, production or development release (I recommend the current production version) and then download the Java version of db4o.</li>
            <li>Copy <b><i>db4o-xxx-java5.jar </i></b>available in the lib folder of your db4o installation to a lib folder in your Android project root directory.</li>
            <li>Refresh the Eclipse project folders, click on lib, right-click on <b><i>db4o-xxx-java5.jar </i></b> and select "Add to build path".</li>
            <li>You're done! You can now use db4o in your Android application and it will be deployed automatically when running the Android emulator.</li>
        </ol><a name="Things to remember when using db4o under Andoid"></a>
        <h4>Things to remember when using db4o under Andoid</h4>
        <ol>
            <li>Use the Java 5 version of the db4o library available on the lib folder of your db4o installation (<b><i>db4o-xxx-java5.jar</i></b>). The other db4o Java versions can be less performant. </li>
            <li>Open the database relative to your parent activity (context) data directory: Db4o.<i>openFile</i>(dbConfig(), db4oDBFullPath(context));<p><b>private</b> String db4oDBFullPath(Context ctx) {<br /></p><p><b>return</b> ctx.getDataDir() + "/" + "dbfile.yap";<br /></p><p>} <br />Otherwise Android security will prevent the creation of the database file.</p></li>
        </ol>
    </body>
</html>