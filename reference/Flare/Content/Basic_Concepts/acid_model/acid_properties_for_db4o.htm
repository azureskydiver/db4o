<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="8" MadCap:lastHeight="1285" MadCap:lastWidth="560" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery">
    <head><title>ACID Properties For Db4o	<link href="../../Resources/Stylesheets/OnlineStyle.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>ACID Properties For Db4o</h1>
        <p>As any
reliable database system db4o ensures ACID transactions. When a commit is
executed, the following order of disc writes is ensured:</p>
        <ol>
            <li>a list of "pointers that
     are to be modified" is written to the database file;</li>
            <li>the database file is switched
     into "in-commit" mode;</li>
            <li>the pointers are actually
     modified in the database file;</li>
            <li>the database file is switched
     to "not-in-commit" mode.</li>
        </ol>
        <p>
            <img src="ACID_Properties_For_Db4o/trnflow.jpg" style="width: 560px;height: 231px;" />
        </p>
        <p>As you
can see from the picture above if a fatal failure occurs after the stage 1, the
database will be restored to its pre-transaction consistent state. If the
failure occurs after any other stage, the transaction information will be
available from the transaction commit record and the commit will be restarted
when the database will be open again.


</p>
        <p>The
isolation in db4o database is at degree one, which means that a transaction
does not overwrite "dirty data" of the other transactions and does not
commit any writes until it completes all its writes (transaction commit
record).</p>
        <p>There are
2 settings that can effect ACID behavior in db4o:</p>
        <p>The first one is disabling the file-flushes. When you add the non-flushing decorator as storage, you get better performance. However due to the missing flushes, the ACID-properties cannot be guaranteed. </p>
        <MadCap:snippetBlock src="../../CodeExamples/acidproperties/DangerousPractises-Using-the-non-flushing-storage-weakens-the-ACID-properties.all.flsnp" />
        <p>Another setting which endangers the ACID properties is disabling the commit-recovery. This setting should only be
used in emergency situations after consulting db4o support. The ACID flow of
the commit can be re-enabled after restoring the original configuration.</p>
        <MadCap:snippetBlock src="../../CodeExamples/acidproperties/DangerousPractises-Disabling-commit-recovery-weakens-the-ACID-properties.all.flsnp" />
    </body>
</html>