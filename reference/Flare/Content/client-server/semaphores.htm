<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="868" MadCap:lastWidth="624" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery;extObjectContainer;setSemaphore;getName;SetSemaphore;typeof;LOCK_;getID;GetID;getPilot;getSignature;idenity;car1;car2;car3;UUID;defragment;startsWith;getPoints;StartsWith;ExtentType;oql;AllPilots;OQLQuery;persistenceManager;newQuery;IList;IComparer;ObjectSet;IObjectSet;comparer;ExtObjectContainer;IExtObjectContainer;VB;pilot1;name1;name2;peekPersisted;isCached;JDO;WeakReferences;VM;ClientConfiguration;IClientConfiguration;BatchMessages;NO_OF_OBJECTS;maxBatchQueueSize;MaxBatchQueueSize;listResult;MessageRecipient;ObjectServer;openServer;ObjectNotStorableException;s;clientserverJava;ServerConfiguration;clientserverCS;cs;clientserverVB;vb;config;databaseFileName;int;NativeSocketFactory;socketFactory;OpenClient;hostName;IObjectServer;OpenServer;IConfiguration;INativeSocketFactory;IObjectContainer;genkey;SSLcert;storepass;SecureSocketFactory;IMessageSender;setMessageRecipient;SetMessageRecipient;IMessageRecipient;processMessage;ProcessMessage;ByVal;UpdateServer;waitMilliSeconds;releaseSemaphore;ReleaseSemaphore;monitorObject;semaphoreName;a1;b1;c1;b2;uncomment">
    <head><title>Semaphores	<link href="../Resources/Stylesheets/OnlineStyle.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>Semaphores</h1>
        <p>db4o Semaphores are named flags that can only be owned by one client/transaction at one time. They are supplied to be used as locks for exclusive access to code blocks in applications and to signal states from one client to the server and to all other clients.</p>
        <p>The naming of semaphores is up to the application. Any string can be used.</p>
        <p>Semaphores are freed automatically when a client disconnects correctly or when a clients presence is no longer detected by the server, that constantly monitors all client connections.</p>
        <p>Semaphores can be set and released with the following two methods:</p>
        <p MadCap:conditions="Primary.Java,Primary.All languages">
            <p>Java:<br /></p>
            <p><code>ExtObjectContainer#setSemaphore<br />(String name, int waitMilliSeconds); <br />ExtObjectContainer#releaseSemaphore(String name); <br /></code>
            </p>
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary..NET">
            <p>.NET: <br /></p>
            <p><code>IExtObjectContainer#SetSemaphore<br />(string name, int waitMilliSeconds); <br />IExtObjectContainer#ReleaseSemaphore(string name); <br /></code>
            </p>
        </p>
        <p MadCap:conditions="Primary:net" /><a name="OO Languages Semaphores "></a>
        <h2>OO Languages Semaphores </h2>The concept of db4o semaphores is very similar to the concept of synchronization in OO programming languages: 
<p MadCap:conditions="Primary.Java,Primary.All languages"><p>Java: <br /></p><p><code>synchronized(monitorObject){   <br />// exclusive code block here
<br />  }<br /></code></p></p><p MadCap:conditions="Primary:java" /><p MadCap:conditions="Primary..NET"><p>.NET: <br /></p><p><code>lock(monitorObject){   <br />// exclusive code block here <br />}<br /></code></p></p><p MadCap:conditions="Primary:net" /><a name="db4o Semaphore"></a><h2>db4o Semaphore</h2><p MadCap:conditions="Primary.Java,Primary.All languages"><p>Java:<br /></p><p><code>if(objectContainer.ext().setSemaphore(semaphoreName, 1000){ <br /> // exclusive code block here <br />objectContainer.ext().releaseSemaphore(semaphoreName); <br />} </code></p></p><p MadCap:conditions="Primary:java" /><p MadCap:conditions="Primary..NET"><p>.NET: <br /></p><p><code>if(objectContainer.Ext().SetSemaphore(semaphoreName, 1000){  <br />// exclusive code block here <br />objectContainer.Ext().ReleaseSemaphore(semaphoreName); <br />} <br /></code></p></p><p MadCap:conditions="Primary:net" /><p>Although the principle of semaphores is very simple they are powerful enough for a wide range of usecases.</p><p>More Reading:<ul><li><p><a href="semaphores/locking_objects.htm">Locking Objects</a></p></li><li><p><a href="semaphores/ensuring_singletons.htm">Ensuring Singletons</a></p></li><li><p><a href="semaphores/limiting_the_number_of_users.htm">Limiting the Number of Users</a></p></li><li><p><a href="semaphores/controlling_login_information.htm">Controlling Login Information</a></p></li></ul></p></body>
</html>