<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>How To Use Defragmentation	<link href="../../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>How To Use Defragmentation</h1>
<p>The simplest way to defragment a db4o file would be:</p>

<p MadCap:conditions="Primary.Java">

<p>Java: </p>

<p><code>Defragment.defrag("filename")</code></p>

</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary.Print">

<p>.NET: </p>

<p><code>Defragment.defrag("filename")</code></p>

</p><p MadCap:conditions="Primary:net" />

<p>The file must not be opened by another process during
defragmentation!</p>

<p>This will move the file <i>filename </i>to <i>filename.backup</i>,
then create a defragmented version of this file in the original position. If
the backup file already exists, this will throw an IOException and no action
will be taken.</p>

<p>You can also specify the backup filename manually:</p>

<p MadCap:conditions="Primary.Java">

<p>Java: </p>

<p><code>Defragment.defrag(filename, backupfile);</code></p>

</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary.Print">

<p>.NET: </p>

<p><code>Defragment.Defrag(filename, backupfile);</code></p>

</p><p MadCap:conditions="Primary:net" />

<p>For more detailed configuration of the defragmentation
process, you can use a <a href="defragmentation_configuration.html" class="wikiLink">DefragmentConfig</a>
instance within the following methods:</p>

<p MadCap:conditions="Primary.Java">

<p>Java: </p>

<p><code>Defragment.defrag(configuration);</code></p>

<p><code>Defragment.defrag(configuration, listener);</code></p>

</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary.Print">

<p>.NET: </p>

<p><code>Defragment.Defrag(configuration);</code></p>

<p><code>Defragment.Defrag(configuration, listener);</code></p>

</p><p MadCap:conditions="Primary:net" />
<p>You can use listener parameter to track problems during defragmentation process. For more
information see <a href="tracking_defragmentation_errors.html" class="wikiLink">Tracking Defragmentation Errors</a>.</p>

<p>Defragmentation can throw IOException in the following
situations:</p>

<ul><li>backup file exists</li><li>database file not found</li><li>database file is opened by another process</li></ul></div>
    </div>
    
  </body></html>
