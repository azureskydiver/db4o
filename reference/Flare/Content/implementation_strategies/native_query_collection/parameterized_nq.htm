<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="866" MadCap:lastWidth="680" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery;extObjectContainer;setSemaphore;getName;SetSemaphore;typeof;LOCK_;objectContainer;getID;GetID;getPilot;getSignature;idenity;car1;car2;car3;UUID;defragment;startsWith;getPoints;StartsWith;ExtentType;oql;AllPilots;OQLQuery;persistenceManager;newQuery;IList;IComparer;ObjectSet;IObjectSet;comparer;ExtObjectContainer;IExtObjectContainer;VB;pilot1;name1;name2;peekPersisted;isCached;JDO;WeakReferences;VM;ClientConfiguration;IClientConfiguration;BatchMessages;NO_OF_OBJECTS;maxBatchQueueSize;MaxBatchQueueSize;listResult;MessageRecipient;ObjectServer;openServer;ObjectNotStorableException;s;clientserverJava;ServerConfiguration;clientserverCS;cs;clientserverVB;vb;config;databaseFileName;int;NativeSocketFactory;socketFactory;OpenClient;hostName;IObjectServer;OpenServer;IConfiguration;INativeSocketFactory;IObjectContainer;genkey;SSLcert;storepass;SecureSocketFactory;IMessageSender;setMessageRecipient;SetMessageRecipient;IMessageRecipient;processMessage;ProcessMessage;ByVal;UpdateServer;waitMilliSeconds;releaseSemaphore;ReleaseSemaphore;monitorObject;semaphoreName;switchToFile;fileName;SwitchToFile;switchToMainFile;SwitchToMainFile;switchs;isAlive;IsAlive;replicateDeletions;ReplicateDeletions;GetType;g;ReplicationEvent;VersionNumbers;providerA;objectsChangedSinceLastReplication;ProviderA;ObjectsChangedSinceLastReplication;hbm;ProviderSignature;MySignature;PeerSignature;ReplicationProvider;HibernateReplicationProvider;ReplicationProviders;m;typed_id;pi2763;longPart;ObjectReference;className;typedId;Uuid;uuid;drs_providers;is_my_sig;t';f';drs_history;provider_id;PK;drs_objects;class_name;varchar;one_to_one;ReplicationConfigurator;SessionFactory;sessionFactory;buildSessionFactory;openSession;beginTransaction;createCriteria;AbstractDb4oTestCase;Db4oFixture;_fixture;AbstractSoloDb4oFixture;AbstractClientServerDb4oFixture;IDb4oFixture;IQuery;NewQuery;retrieveOnlyInstance;RetrieveOnlyInstance;countOccurences;CountOccurences;foreach;Visitor4;Foreach;IVisitor4;obj;deleteAll;DeleteAll;ReflectClass;reflectClass;indexField;fieldName;IndexField;Config;setUp;SetUp;db4oSetupBeforeStore;db4oSetupAfterStore;Db4oSetupBeforeStore;Db4oSetupAfterStore;runSoloAndClientServer;RunSoloAndClientServer;runSolo;RunSolo;runClientServer;RunClientServer;CodeBlock;Db4oUnit;ICodeBlock;isTrue;msg;IsTrue;bool;Msg;areEqual;AreEqual;FrameworkTestCase;runTestAndExpect;expFailures;RunTestAndExpect;ITest;GetConfig;storedType;runtimeType;tAlias;resolveRuntimeName;resolveStoredName;storedPattern;runtimePattern;aliasing;QueryStarted;QueryFinished;QueryEventArgs;ObjectEventArgs;CancellableObjectEventArgs;CommitEventArgs;client2;client1;WaitForCompletion;args;AddHandler;forObjectContainer;ForObjectContainer;OnCreated;createdEvent;onEvent;Event4;ABC0001DEF;MustInherit;CountedObject;IncrementedId;queryStarted;queryFinished;QueryStats;q;executionTime;activationCount;storedClass;Foo;classname;storedClasses;StoredClasses;getStoredFields;GetStoredFields;storedField;getParentStoredClass;GetParentStoredClass;reflectWith;Db4oFactory;ReflectWith;self_get;self_set;LoggingReflector;IoAdapter;MyEncryptionAdapter;Io;Db4oEnhancerMSBuildTask;SensorPanel;GetOptions;UsingTask;AssemblyFile;OutputPath;TaskName;ItemGroup;Db4oEnhance;TargetPath;AfterBuild;AbstractAssemblyInstrumentation;IAssemblyInstrumentation;TAInstrumentation;tp;EnhancementExample;tacustom;Db4oPersistent;typedef;classTargetDir;jarTargetDir;MaintenanceQueue;'Barrichello';'BMW';useIndexSystem;useRamSystem;discardSmallerThan;DiscardSmallerThan;allObjects;SumPilotPoints;SelectMinPointsPilot;AveragePilotPoints;CountSubGroups;SelectPilotsAndTrainees;SelectPilotsInRange">
    <head><title>Parameterized NQ	<link href="../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>Parameterized NQ</h1>
        <p>The following examples show how to pass parameters to the Native Query predicate. <a href="store_pilots.htm">Store Pilots</a> function is used to fill in the database. </p><a name="GetTestPilots"></a>
        <h2>GetTestPilots</h2>
        <p>Using predicate constructor to specify the querying parameter. </p>
        <p MadCap:conditions="Primary.Java">
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.java/getTestPilots.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.java/PilotNamePredicate.flsnp" />
            <p>
            </p>
            <p MadCap:conditions="Primary:java" />
        </p>
        <p MadCap:conditions="Primary..NET,Primary.c#">
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.cs/GetTestPilots.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.cs/PilotNamePredicate.flsnp" />
        </p>
        <p MadCap:conditions="Primary:cs" />
        <p MadCap:conditions="Primary..NET,Primary.VB.NET">
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.vb/GetTestPilots.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.vb/PilotNamePredicate.flsnp" />
        </p>
        <p MadCap:conditions="Primary:vb" /><a name="GetProfessionalPilots"></a>
        <h2>GetProfessionalPilots</h2>
        <p>Using a function to process the NQ. </p>
        <p MadCap:conditions="Primary.Java">
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.java/getProfessionalPilots.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.java/byNameBeginning.flsnp" />
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary..NET,Primary.c#">
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.cs/GetProfessionalPilots.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ParameterizedExamples.cs/ByNameBeginning.flsnp" />
        </p>
        <p MadCap:conditions="Primary:cs" />
        <p MadCap:conditions="Primary..NET,Primary.VB.NET">
            <p>No analogue in VB.</p>
        </p>
        <p MadCap:conditions="Primary:vb" />
        <p MadCap:conditions="Primary.Java"><a name="Querying Class Hierarchy"></a>
            <h2>Querying Class Hierarchy</h2>
            <p>The following
example shows how to correctly implement parameterized NQ predicate for
querying derived classes. </p>
            <p>Let's use
the class hierarchy as defined in <a href="persistent_classes.htm">Persistent Classes</a>.</p>
            <p>PersonNamePredicate
will be used for querying classes derived from Person:</p>
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/PersonNamePredicate.flsnp" />
            <p>Let's
save some Pilot and Trainee objects:</p>
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/storePersons.flsnp" />
            <p>Now we
have both Pilot and Trainee objects starting from "Train". What should we do to
retrieve only Trainee objects?</p>
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/getTrainees.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/testQuery.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/createPredicateWrong.flsnp" />
            <MadCap:snippetBlock src="../../Resources/Snippets/Parameterized NQ/ComplexParameterizedExample.java/createPredicateCorrect.flsnp" />
            <p>You can
see that in order to get the correct results we need to supply our preicate
class with the queried class, otherwise both Pilot and Trainee objects will be
included in the result set.</p>
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary.Online">Download example code:</p>
        <p MadCap:conditions="Primary.Online">
            <MadCap:conditionalText MadCap:conditions="Primary..NET,Primary.VB.NET"><a href="nqcollectionvb.zip">VB.NET </a>
            </MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="Primary..NET,Primary.c#"><a href="nqcollectioncs.zip">c# </a>
            </MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="Primary.Java"><a href="nqcollectionjava.zip">Java </a>
            </MadCap:conditionalText>
        </p>
    </body>
</html>