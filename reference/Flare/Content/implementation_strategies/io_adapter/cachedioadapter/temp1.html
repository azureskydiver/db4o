<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>Using CachedIoAdapter	<link href="../../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Using CachedIoAdapter</h1><p>CachedIoAdapter can be set up using the following code:</p>

<p MadCap:conditions="Primary.Java"><p>Java: </p>

<p><code>delegateAdapter = new
RandomAccessFileAdapter();</code></p>

<p><code>Db4o.configure().io(new
CachedIoAdapter(delegateAdapter));</code></p>

</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#"><p>c#: </p>

<p><code>delegateAdapter = new
RandomAccessFileAdapter();</code></p>

<p><code>Db4oFactory.Configure().Io(new
CachedIoAdapter(delegateAdapter));</code></p>

</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">
<p>VB: </p>


<p><code>Dim delegateAdapter As RandomAccessFileAdapter = new
RandomAccessFileAdapter();</code></p>


<p><code>Db4oFactory.Configure().Io(new
CachedIoAdapter(delegateAdapter));</code></p>


</p><p MadCap:conditions="Primary:vb" />


<p>This will create 64 pages in memory of 1024 bytes each, resulting
in 64 kB of memory available for caching. </p>

<p>You can customize the amount of available memory using:</p>

<p MadCap:conditions="Primary.Java"><p>Java: </p>

<p><code>Db4o.configure().io(new
CachedIoAdapter(delegateAdapter, page_size, page_count));</code></p>

</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#"><p>c#: </p>

<p><code>Db4oFactory.Configure().Io(new
CachedIoAdapter(delegateAdapter, page_size, page_count));</code></p>

</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET"><p>VB: </p>

<p><code>Db4oFactory.Configure().Io(new
CachedIoAdapter(delegateAdapter, page_size, page_count));</code></p>

</p><p MadCap:conditions="Primary:vb" />

<p>Optimal cache size depends on many factors (application design, system resources etc) and will show
different results for different disc access operations (read/write). The best
way to find an optimal solution is to experiment with different page sizes and
counts. Too little cache memory will result in decrease of performance, too
much of it will unnecessary occupy your system resources. Note that all the
caching pages are allocated in the memory on CachedIoAdapter creation and are
not released while CachedIoAdapter is in use. Effectively, you can only release
this memory closing the database file and switching back to the default
RandomAccessFileAdapter.</p>



</div>
    </div>
    
  </body></html>
