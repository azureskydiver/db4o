<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="806" MadCap:lastWidth="624" MadCap:ignoredWords="RandomAccessFileAdapter;randomAccessFileAdapter;NonFlushingIoAdapter;nonFlushingIoAdapter;CachedIoAdapter;cachedIoAdapter;disableCommitRecovery;DisableCommitRecovery;extObjectContainer;setSemaphore;getName;SetSemaphore;typeof;LOCK_;objectContainer;getID;GetID;getPilot;getSignature;idenity;car1;car2;car3;UUID;defragment;startsWith;getPoints;StartsWith;ExtentType;oql;AllPilots;OQLQuery;persistenceManager;newQuery;IList;IComparer;ObjectSet;IObjectSet;comparer;ExtObjectContainer;IExtObjectContainer;VB;pilot1;name1;name2;peekPersisted;isCached;JDO;WeakReferences;VM;ClientConfiguration;IClientConfiguration;BatchMessages;NO_OF_OBJECTS;maxBatchQueueSize;MaxBatchQueueSize;listResult;MessageRecipient;ObjectServer;openServer;ObjectNotStorableException;s;clientserverJava;ServerConfiguration;clientserverCS;cs;clientserverVB;vb;config;databaseFileName;int;NativeSocketFactory;socketFactory;OpenClient;hostName;IObjectServer;OpenServer;IConfiguration;INativeSocketFactory;IObjectContainer;genkey;SSLcert;storepass;SecureSocketFactory;IMessageSender;setMessageRecipient;SetMessageRecipient;IMessageRecipient;processMessage;ProcessMessage;ByVal;UpdateServer;waitMilliSeconds;releaseSemaphore;ReleaseSemaphore;monitorObject;semaphoreName;switchToFile;fileName;SwitchToFile;switchToMainFile;SwitchToMainFile;switchs;isAlive;IsAlive;replicateDeletions;ReplicateDeletions;GetType;g;ReplicationEvent;VersionNumbers;providerA;objectsChangedSinceLastReplication;ProviderA;ObjectsChangedSinceLastReplication;hbm;ProviderSignature;MySignature;PeerSignature;ReplicationProvider;HibernateReplicationProvider;ReplicationProviders;m;typed_id;pi2763;longPart;ObjectReference;className;typedId;Uuid;uuid;drs_providers;is_my_sig;t';f';drs_history;provider_id;PK;drs_objects;class_name;varchar;one_to_one;ReplicationConfigurator;SessionFactory;sessionFactory;buildSessionFactory;openSession;beginTransaction;createCriteria;AbstractDb4oTestCase;Db4oFixture;_fixture;AbstractSoloDb4oFixture;AbstractClientServerDb4oFixture;IDb4oFixture;IQuery;NewQuery;retrieveOnlyInstance;RetrieveOnlyInstance;countOccurences;CountOccurences;foreach;Visitor4;Foreach;IVisitor4;obj;deleteAll;DeleteAll;ReflectClass;reflectClass;indexField;fieldName;IndexField;Config;setUp;SetUp;db4oSetupBeforeStore;db4oSetupAfterStore;Db4oSetupBeforeStore;Db4oSetupAfterStore;runSoloAndClientServer;RunSoloAndClientServer;runSolo;RunSolo;runClientServer;RunClientServer;CodeBlock;Db4oUnit;ICodeBlock;isTrue;msg;IsTrue;bool;Msg;areEqual;AreEqual;FrameworkTestCase;runTestAndExpect;expFailures;RunTestAndExpect;ITest;GetConfig;storedType;runtimeType;tAlias;resolveRuntimeName;resolveStoredName;storedPattern;runtimePattern;aliasing;QueryStarted;QueryFinished;QueryEventArgs;ObjectEventArgs;CancellableObjectEventArgs;CommitEventArgs;client2;client1;WaitForCompletion;args;AddHandler;forObjectContainer;ForObjectContainer;OnCreated;createdEvent;onEvent;Event4;ABC0001DEF;MustInherit;CountedObject;IncrementedId;queryStarted;queryFinished;QueryStats;q;executionTime;activationCount;storedClass;Foo;classname;storedClasses;StoredClasses;getStoredFields;GetStoredFields;storedField;getParentStoredClass;GetParentStoredClass;reflectWith;Db4oFactory;ReflectWith;self_get;self_set;LoggingReflector;IoAdapter;MyEncryptionAdapter;Io;Db4oEnhancerMSBuildTask;SensorPanel;GetOptions;UsingTask;AssemblyFile;OutputPath;TaskName;ItemGroup;Db4oEnhance;TargetPath;AfterBuild;AbstractAssemblyInstrumentation;IAssemblyInstrumentation;TAInstrumentation;tp;EnhancementExample;tacustom;Db4oPersistent;typedef;classTargetDir;jarTargetDir;MaintenanceQueue;'Barrichello';'BMW';useIndexSystem;useRamSystem;discardSmallerThan;DiscardSmallerThan;allObjects;SumPilotPoints;SelectMinPointsPilot;AveragePilotPoints;CountSubGroups;SelectPilotsAndTrainees;SelectPilotsInRange;SelectAndChangePilots;SelectTestPilots6PointsMore;SelectPilots6To12Points;SelectPilotsRandom;SelectPilotsEven;SelectAnyOnePilot;SelectDistinctPilots;SelectAllPilots;SelectAllPilotsNonGeneric;GetSortedPilots;GetPilotsSortByNameAndPoints;GetPilotsSortWithComparator;SelectPilot5Points;SelectTestPilots;SelectPilotsNumberX6;newPackage;newClass;objectField;oldField;newField;newAssembly;ObjectField;aaplication">
    <head><title>Cache Configuration Example	<link href="../../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" /><script type="text/javascript" src="../../../Resources/Code/prettify.js"></script></title>
    </head>
    <body onload="prettyPrint()">
        <h1>Cache Configuration Example</h1>
        <p>The following example helps to see the effect of cache
by modifying the cache size. Note, that this example is not a good illustration
of the LRU cache algorithm, and only shows the effect of simple caching of the
most recent data.</p>
        <p>For the test we will use the following 2 classes:
Item and ItemStore, holding a collection of items:</p>
        <p MadCap:conditions="Primary.Java">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/Item.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/ItemStore.flsnp" />
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary..NET,Primary.c#">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/Item.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/ItemStore.flsnp" />
        </p>
        <p MadCap:conditions="Primary:cs" />
        <p MadCap:conditions="Primary..NET,Primary.VB.NET">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/Item.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/ItemStore.flsnp" />
        </p>
        <p MadCap:conditions="Primary:vb" />
        <p>The following methods will be used to fill in and
query the database:</p>
        <p MadCap:conditions="Primary.Java">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/createDatabase.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/queryDatabase.flsnp" />
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary..NET,Primary.c#">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/CreateDatabase.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/QueryDatabase.flsnp" />
        </p>
        <p MadCap:conditions="Primary:cs" />
        <p MadCap:conditions="Primary..NET,Primary.VB.NET">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/CreateDatabase.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/QueryDatabase.flsnp" />
        </p>
        <p MadCap:conditions="Primary:vb" />
        <p>In general you should see the benefits of using
cache with the majority of db4o operations. However, the effect is most obvious
when a large amount of database information should be accessed fast (query) and
this information is not loaded in the applications hash memory. We are trying
to reproduce this situation in the second method querying database. If the
amount of items in the ItemStore collection is 10000, the database size will be
around 900 KB. With the default cache size, i.e. page count multiplied by page
size (64 * 1024), this will mean that the whole collection won't fit into the
cache (It can still fit into your hash memory, so you may want to decrease the
available hash memory or increase the size of the collection to see the effect.).
</p>
        <p>We will use the following configuration methods to
compare the default cache allocation and the custom one:</p>
        <p MadCap:conditions="Primary.Java">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/getConfig.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.java/getDefaultConfig.flsnp" />
        </p>
        <p MadCap:conditions="Primary:java" />
        <p MadCap:conditions="Primary..NET,Primary.c#">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/GetConfig.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.cs/GetDefaultConfig.flsnp" />
        </p>
        <p MadCap:conditions="Primary:cs" />
        <p MadCap:conditions="Primary..NET,Primary.VB.NET">
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/GetConfig.flsnp" />
            <MadCap:snippetBlock src="../../../Resources/Snippets/Cache Configuration Example/CachingStorageExample.vb/GetDefaultConfig.flsnp" />
        </p>
        <p MadCap:conditions="Primary:vb" />
        <p>Using custom page count = 1024 will make the cache
size enough to fit the whole collection, and you should see some performance
improvement browsing the retrieved collection second time (Unless it all fits
into your hash memory in any case). Please, also try decreasing page size and
count to see the opposite effect.</p>
        <p MadCap:conditions="Primary.Online">Download example code:</p>
        <p MadCap:conditions="Primary.Online">
            <MadCap:conditionalText MadCap:conditions="Primary..NET,Primary.VB.NET"><a href="cachingstoragevb.zip">VB.NET </a>
            </MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="Primary..NET,Primary.c#"><a href="cachingstoragecs.zip">c# </a>
            </MadCap:conditionalText>
            <MadCap:conditionalText MadCap:conditions="Primary.Java"><a href="cachingstoragejava.zip">Java </a>
            </MadCap:conditionalText>
        </p>
    </body>
</html>