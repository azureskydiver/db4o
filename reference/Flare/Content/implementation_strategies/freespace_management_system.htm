<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="386" MadCap:lastWidth="586">
    <head>
    </head>
    <body>
        <h1>Freespace Management System</h1>
        <p>The db4o free space manager is a special system that is responsible for allocating, discarding, merging of space for db4o usage and keeping database size at minimum</p>
        <p>db4o organizes its files into variable-sized slots. On the lowest level the database file is seen as a uniform pool of bytes, from which slots of variable size can be allocated.</p>
        <p>The free space manager keeps track of the portions of the database file that haven't been allocated for use and gets notified when slots are 'freed', i.e. returned back to the pool.</p>
        <p>That is how it works:</p>
        <ul>
            <li>All objects are written to the database file immediately, when they are stored or updated.</li>
            <li>Updated objects get a new or previously freed place in the database file.</li>
            <li>New or modified pointers to new or modified objects are stored in RAM. </li>
            <li>Old and deleted objects are marked as 'freespace'.</li>
        </ul>
        <p>In general case each persisted object occupies one slot. This slot contains metadata, values of direct primitive members and references to the slots of non-primitive members. What actually goes directly into a slot and what is external is not fixed and differs from version to version.</p>
        <p> More Reading:<ul><li><MadCap:xref href="../configuration/file/freespace_configuration.htm" target="" title="" alt="">See "Freespace Configuration"</MadCap:xref></li><li><p><a href="freespace_management_system/defragmentation_role.htm">Defragmentation Role</a></p></li></ul></p>
    </body>
</html>