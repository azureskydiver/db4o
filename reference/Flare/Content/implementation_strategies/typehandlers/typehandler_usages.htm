<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>TypeHandler Usages	<link href="../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>TypeHandler Usages</h1><div id="TOC"><div id="TOCinner"><span class="TOCtitle">Contents</span><div class="TOCcontents"><ul><li><a href ="#Selective Field Persistence">Selective Field Persistence</a></li><li><a href ="#Ignore Fields Persistence">Ignore Fields Persistence</a></li></ul></div></div></div>

<p>This chapter provides some of the typehandler examples,
which can be used as a replacement of translators.</p><a name="Selective Field Persistence"></a><h2>Selective Field Persistence  </h2>

<p>In the first example we will look at the case, when we want
to save only certain fields of a class. Suppose we have the following class:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/NotStorable.java/NotStorable.java.flsnp" />
</p><p MadCap:conditions="Primary:java" /><p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/LocalizedItemList.cs/LocalizedItemList.cs.flsnp" />


</p><p MadCap:conditions="Primary:cs" /><p MadCap:conditions="Primary..NET,Primary.VB.NET">


<div class="AttachmentInfo">Code attachment not found: /Resources/Reference/Implementation_Strategies/TypeHandlers/TypeHandler_Usages/TypehandlerTranslatorVB.Zip</div>




</p><p MadCap:conditions="Primary:vb" /><p>In this case we obviously do not want to store transient
<code>length</code> field.  To achieve
this we can write a new typehandler, which will store a duplicate of the class
without the length field. To make the work easier, we will extend the default
FirstClassObjectHandler.  First class
means any persistent object that has its identity in the database.</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/NotStorableTypehandler.java/NotStorableTypehandler.java.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/CultureInfoTypehandler.CS/CultureInfoTypehandler.CS.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">



</p><p MadCap:conditions="Primary:vb" />


<p>You can see that in this case, we are just replacing
NotStorable class with a duplicate class Storable and save it instead. </p>

<p>Let's test how it works. First we should create
configuration to include the typehandler:</p><p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.java/storeWithTypehandler.flsnp" />
<p></p><p MadCap:conditions="Primary:cs" /></p>

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.cs/StoreWithTypehandler.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">


</p><p MadCap:conditions="Primary:vb" />

<p>And now test store and retrieve:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.java/tryStoreAndRetrieve.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.cs/TryStoreAndRetrieve.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">



</p><p MadCap:conditions="Primary:vb" /><p>This works. However, this example has certain
limitations:  the fields were in fact
discarded and encapsulated into a Storable object. This means that we won't be
able to query for fields or index on fields. </p>

<a name="Ignore Fields Persistence"></a><h2>Ignore Fields Persistence  </h2>

<p>In the next example we will use one of the db4o internal
typehandlers, which allows to skip all the field information for certain
objects. This can be useful to safe the database space when the object information
is not required for future retrieval. Let's use the following classes:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/PersistentItem.java/PersistentItem.java.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/PersistentItem.cs/PersistentItem.cs.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

</p><p MadCap:conditions="Primary:vb" />


<p>Let's assume that TransientItem field information is not
required to be stored in our application. We can save the database space then,
by using IgnoreFieldsTypeHandler. The configuration will look like this:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.java/ignoreFieldsConfiguration.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.cs/IgnoreFieldsConfiguration.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">



</p><p MadCap:conditions="Primary:vb" />


<p>We can check the result with the following code:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.java/ignoreFieldsTypehandlerExample.flsnp" />
</p><p MadCap:conditions="Primary:java" /><p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/TypeHandler Usages/TranslatorExample.cs/IgnoreFieldsTypehandlerExample.flsnp" />
</p><p MadCap:conditions="Primary:cs" /><p MadCap:conditions="Primary..NET,Primary.VB.NET">



</p><p MadCap:conditions="Primary:vb" />
</div>
    </div>
    
  </body></html>