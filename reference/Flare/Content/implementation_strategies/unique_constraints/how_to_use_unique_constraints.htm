<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="859" MadCap:lastWidth="586">
    <head><title>How To Use Unique Constraints</title>
    </head>
    <body onload="prettyPrint()">
        <h1>How To Use Unique Constraints</h1>
        <p>In order to work with the unique constraints you will need to remember the
following 3 steps.</p>
        <p>1. Add an index for a field you wish to be unique:</p>
        <pre class="monospace" MadCap:conditions="Primary.Java">Java:<br />configuration.objectClass(Item.class).objectField("field").indexed(true);</pre>
        <pre class="monospace" MadCap:conditions="Primary..NET">c#:<br />configuration.ObjectClass(typeof(Item)).ObjectField("field").Indexed(true);</pre>
        <pre class="monospace" MadCap:conditions="Primary..NET">VB:<br />configuration.ObjectClass(GetType(Item)).ObjectField("field").Indexed(true)</pre>
        <p>2. Configure a unique constraint:</p>
        <pre class="monospace">Java:<br />configuration.add(new UniqueFieldValueConstraint(Item.class,"field"));</pre>
        <pre class="monospace" MadCap:conditions="Primary..NET">c#:<br />configuration.Add(new UniqueFieldValueConstraint(typeof(Item),"field"));</pre>
        <pre class="monospace" MadCap:conditions="Primary..NET">VB:<br />configuration.Add(New UniqueFieldValueConstraint(GetType(Item),"field"))</pre>
        <p>3. Handle unique constraint violation:</p>
        <pre class="monospace" xml:space="preserve" MadCap:conditions="Primary.Java">Java:<br />// open objectContainertry
{
  // do some work and save some objects  
  objectContainer.commit();
} catch(UniqueFieldValueConstraintViolationException ex) {<br />  // log the error, notify the user  <br /> objectContainer.rollback();<br />}</pre>
        <pre class="monospace" xml:space="preserve" MadCap:conditions="Primary..NET">c#:<br />// open objectContainertry 
{  <br />  // do some work and save some objects<br />  objectContainer.Commit();<br />} catch(UniqueFieldValueConstraintViolationException ex) {<br />  // log the error, notify the user<br />  objectContainer.Rollback();<br />}</pre>
        <pre class="monospace" xml:space="preserve" MadCap:conditions="Primary..NET">VB:<br />' open objectContainer<br />Try<br />  ' do some work and save some objects
  objectContainer.Commit() 
Catch ex As UniqueFieldValueConstraintViolationException<br />   ' log the error, notify the user
   objectContainer.Rollback()
End</pre>
    </body>
</html>