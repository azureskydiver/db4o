<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>Configuration	<link href="../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
        <h1>Configuration</h1>

<p>db4o provides a wide range of configuration methods to request special behaviour. </p>
<p>For a complete list of all available methods see the following interfaces:</p><ul><li> <a href="configuration/common_configuration.htm" class="wikiLink">Common Configuration</a>  </li><li><a href="configuration/embedded_configuration.htm" class="wikiLink">Embedded Configuration</a>  </li><li><a href="configuration/client_configuration.htm" class="wikiLink">Client Configuration</a></li><li><a href="configuration/server_configuration.htm" class="wikiLink">Server Configuration</a></li><li><a href="configuration/objectclass_configuration.htm" class="wikiLink">ObjectClass</a></li><li><a href="configuration/objectfield_configuration.htm" class="wikiLink">ObjectField</a>  </li><li><a href="configuration/cache_configuration.htm" class="wikiLink">Cache Configuration</a>  </li><li><a href="configuration/file_configuration.htm" class="wikiLink">File Configuration</a></li><li><a href="configuration/configuration_item.htm" class="wikiLink">Configuration Item</a></li></ul>The following paragraphs contain some useful hints around using configuration calls.
<a name="Working With Configuration"></a><h2>Working With Configuration </h2>
<p>Configuration can be obtained for embedded and client-server modes:</p>
<p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>EmbeddedConfiguration configuration = Db4oEmbedded.newConfiguration();</code></p><p><code>ServerConfiguration serverConfiguration = Db4oClientServer.newServerConfiguration();</code> </p><p><code>ClientConfiguration clientConfiguration = Db4oClientServer.newClientConfiguration();</code> </p>
</p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p>
<p><code>IConfiguration configuration = Db4oEmbedded.NewConfiguration();</code></p><p><code>IServerConfiguration serverConfiguration = Db4oClientServer.NewServerConfiguration();</code></p><p><code>IClientConfiguration clientConfiguration = Db4oClientServer.NewClientConfiguration();</code>  </p>
</p><p MadCap:conditions="Primary:net" />
<p>To apply the configuration to an ObjectContainer/Client/Server use one of the following methods:</p>
<p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>Db4oEmbedded.openFile(configuration, databaseFileName)</code> </p>
<p><code>Db4oClientServer.openServer(serverConfiguration, databaseFileName, port)</code></p>
<p><code>Db4oClientServer.openClient(clientConfiguration, hostName, port, user, password)</code></p>
</p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p>
<p><code>Db4oEmbedded.OpenFile(configuration, databaseFileName)</code> </p>
<p><code>Db4oClientServer.OpenServer(serverConfiguration, databaseFileName, port)</code></p>
<p><code>Db4oClientServer.OpenClient(clientConfiguration, hostName, port, user, password)</code></p>
</p><p MadCap:conditions="Primary:net" />
<p>Note, that the same configuration object can't be re-used in more than one object container. If you need to open several object containers with the same set of configuration settings, it is recommended to create a method, which will return a new configuration instance on request:</p><p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>private Configuration configure(){</code></p><p><code>    EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();</code></p><p><code>    config.callbacks(false);</code></p><p><code>    ...</code></p><p><code>    return config;</code> </p><p><code>}</code> </p></p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p><p><code>private IConfiguration Configure(){</code></p>
<p><code>    IEmbeddedConfiguration config = Db4oEmbedded.NewConfiguration();</code></p>
<p><code>    config.Callbacks(false);</code></p>
<p><code>    ...</code></p>
<p><code>    return config;</code> 
</p>
<p><code>}</code></p></p><p MadCap:conditions="Primary:net" /><p>Configuration settings are <b>not</b> stored in db4o database files. Accordingly you will need to pass the same configuration set <b>every time</b> you open an ObjectContainer/Client/Server.  For using db4o in client/server mode it is recommended to use the same configuration on the server and on the client. To set this up nicely it makes sense to create one application class with one method that returns the required configuration and to deploy this class both to the server and to all clients.   </p>
<p>Client/Server specific configuration calls reside in ClientConfiguration and ServerConfiguration interfaces (.NET conventional name IClientConfiguration and IServerConfiguration).  </p>For db4o versions before 6.0 the above-mentioned method of working with the configuration was not available. Instead, you could use:
<ul>
<li>global db4o configuration context;</li>
<li>object container instance configuration.</li></ul>
<p>These methods are still available, however their usage is not advised due to their limitations. Using new configuration methods with the old ones can be harmful. </p>

<a name="Global Configuration"></a><h3>Global Configuration</h3>
<p>Global configuration can be set using:</p>
<p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>Db4o.configure()</code></p>
</p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p>
<p><code>Db4oFactory.Configure()</code></p>
</p><p MadCap:conditions="Primary:net" />
<p>Starting from version 6.0 you can obtain a clone of the global configuration:</p>
<p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>Configuration configuration = Db4o.cloneConfiguration()</code></p>
</p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p>
<p><code>IConfiguration configuration = Db4oFactory.CloneConfiguration()</code></p>
</p><p MadCap:conditions="Primary:net" />
<p>When an ObjectContainer/ObjectServer is opened, the global configuration context is cloned and copied into the newly opened ObjectContainer/ObjectServer. Subsequent calls against the global context with Db4o.configure() have no effect on open ObjectContainers/ObjectServers.</p>
<p> Global configuration has a number of disadvantages:</p>
<ul>
<li>the settings apply to all the object containers in the current VM/runtime</li>
<li>the settings can't be reset.</li></ul>
<p> </p>
<a name="Object Container Configuration"></a><h3>Object Container Configuration</h3>
<p>Object Container instance configuration can be used for an open ObjectContainer/Client/Server:</p>
<p MadCap:conditions="Primary.Java">
<p>Java:</p>
<p><code>objectContainer.ext().configure() </code> <code>objectServer.ext().configure()</code></p>
</p><p MadCap:conditions="Primary:java" />
<p MadCap:conditions="Primary.Print">
<p>.NET:</p>
<p><code>objectContainer.Ext().Configure()</code> <code>objectServer.Ext().Configure()</code></p>
</p><p MadCap:conditions="Primary:net" />
<p>Closing the container will erase all the settings.</p>
<p>The obvious disadvantages are:</p>
<ul>
<li>configuration can not be created before the container is opened;</li>
<li>
<p>some configuration methods effect the way the system works on opening an object container therefore have no influence on the open object container;</p></li>
<li>
<p>some configuration methods only effect the creation of a database;</p></li>
<li>configuration settings will need to be repeated as many times as the new container gets opened. </li></ul> 
<a name="Further Reading"></a><h2>Further Reading</h2>
<p>Some configuration switches are discussed in more detail in the following chapters:</p>
<ul>
<li><a href="performance_hints.htm" class="wikiLink">Performance Hints</a></li>
<li><a href="indexing.htm" class="wikiLink">Indexing</a></li>
<li><a href="../implementation_strategies/encryption.htm" class="wikiLink">Encryption</a></li></ul>    
  </body></html>