<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>Cascade On Delete	<link href="../../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Cascade On Delete</h1><p> </p><p>If you are using cascadeOnDelete option and explicit deletion
of one object causes cascaded delete on several others, you may expect slower
execution:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../../Resources/Snippets/Cascade On Delete/DeletePerformanceBenchmark.java/runDeleteDepthTest.flsnp" />
<MadCap:snippetBlock src="../../../Resources/Snippets/Cascade On Delete/DeletePerformanceBenchmark.java/configureDepthTest.flsnp" />
<MadCap:snippetBlock src="../../../Resources/Snippets/Cascade On Delete/DeletePerformanceBenchmark.java/initShallowObject.flsnp" />
<MadCap:snippetBlock src="../../../Resources/Snippets/Cascade On Delete/DeletePerformanceBenchmark.java/init.flsnp" />iv class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">deleteAny</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> deleteAny(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i) </span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> time </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> counter </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text').style.display='inline';"/>      </span><span style="color: #0000FF;">while</span><span style="color: #000000;"> (counter</span><span style="color: #000000;">++</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> i)</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> id </span><span style="color: #000000;">=</span><span style="color: #000000;"> selectAny();
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        time </span><span style="color: #000000;">+=</span><span style="color: #000000;"> deleteById(id);
</span><span style="color: #008080;">7</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>      }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">8</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Deleted </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> i </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> objects in: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> time </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms.</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">9</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>  }</span></span></div></pre></div></div>

</p><p MadCap:conditions="Primary:java" />

<p>Note that in the first part of the test each object
deletion only includes a single object. Therefore, when we delete a 1000
objects the amount of the objects in the database is 1000 less. In the second
part each object deletion will trigger deletion of all field objects
(cascadeOnDelete option), therefore the amount of objects deleted from the
database can be anywhere between 1000 (only lowest level objects) and 3000(all
top level objects with their field objects).</p>

<p><i>The results from the test machine:</i></p>

<p><i>Delete test with
objects of different depth</i></p>

<p><i>Deleting 1000 of
10000 objects with 1 levels of embedded objects:</i></p>

<p><i>Store 10000
objects: 528ms</i></p>

<p><i>Amount of
objects left: 10000</i></p>

<p><i>Deleted 1000
objects in: 197 ms.</i></p>

<p><i>Amount of
objects left: 9000</i></p>

<p><i>Deleting 1000 of
10000 objects with 3 levels of embedded objects:</i></p>

<p><i>Store 30000
objects: 1693ms</i></p>

<p><i>Amount of
objects left: 39000</i></p>

<p><i>Deleted 1000
objects in: 340 ms.</i></p>

<p><i>Amount of
objects left: 36978</i></p>



</div>
    </div>
    
  <p>Download example code:</p>        <p></p></body></html>