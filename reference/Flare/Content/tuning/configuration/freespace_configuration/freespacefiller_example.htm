<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>FreespaceFiller Example	<link href="../../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>FreespaceFiller Example</h1>
<p>First of
all let's create a database and have a look at the resultant file:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.java/Item.flsnp" />
<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.java/createDatabase.flsnp" />
</p><p MadCap:conditions="Primary:java" /><p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.cs/Item.flsnp" />
<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.cs/CreateDatabase.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">


<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.vb/Item.flsnp" />

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.vb/CreateDatabase.flsnp" />

</p><p MadCap:conditions="Primary:vb" /><p>So, we've
stored lots of Item objects, each of them has 2 string fields. Let's open
reference.db4o file with any text editor and check if we can see some useful
information:</p>

<p><img src="FreespaceFiller_Example/before1.jpg"/></p>

<p>From the
image above you can see that all the string fields are actually readable without
any special software.</p>

<p>Now, lets
create a default configuration - like Db4oEmbedded.newConfiguration() for Java or Db4oEmbedded.NewConfiguration()<b> </b>for .NET - and delete all the objects:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.java/deleteObjects.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.cs/DeleteObjects.flsnp" />
</p><p MadCap:conditions="Primary:cs" /><p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.vb/DeleteObjects.flsnp" />
</p><p MadCap:conditions="Primary:vb" /><p>If you will
open the database file in a text editor again - you won't see much change - the
database file is still the same size and all the string information from the
Item objects is still there. </p>

<p>We can make
the deletion more effective by creating a custom configuration with a freespace
filler implementation:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.java/getConfig.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.cs/GetConfig.flsnp" />iv class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">FreespaceFillerExample.cs: <span class="fscMemberName">RandomFreespaceFiller</span></span></div><div class="fscCode"><pre ID="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> RandomFreespaceFiller: IFreespaceFiller
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Open_Text').style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Closed_Image').style.display='inline'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Closed_Text').style.display='inline';"/><img id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Closed_Text').style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Open_Image').style.display='inline'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Open_Text').style.display='inline';"/>        </span><span id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_62_282_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Fill(BlockAwareBinWindow io)
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Open_Text').style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Closed_Image').style.display='inline'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Closed_Text').style.display='inline';"/><img id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Closed_Text').style.display='none'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Open_Image').style.display='inline'; document.getElementById('ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Open_Text').style.display='inline';"/>            </span><span id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="ResourcesReferenceTuningConfigurationFreespace_ConfigurationFreespaceFiller_ExampleFreespaceFillerCS.ZipsFreespaceFillerExample.Cs_FreespaceFillerExample.Cs_RandomFreespaceFiller_2264_79_129_272_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                Random r </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Random();
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        </span><span style="color: #0000FF;">byte</span><span style="color: #000000;">[] data </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> </span><span style="color: #0000FF;">byte</span><span style="color: #000000;">[io.Length()];
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        r.NextBytes(data);
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        io.Write(</span><span style="color: #800080;">0</span><span style="color: #000000;">, data);
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>  </p>

</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">


<MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.vb/GetConfig.flsnp" /><MadCap:snippetBlock src="../../../Resources/Snippets/FreespaceFiller Example/FreespaceFillerExample.vb/RandomFreespaceFiller.flsnp" />
</p>


</p><p MadCap:conditions="Primary:vb" /><p>You can see
that the implementation is very simple - you only need to implement one method:
fill. The parameter gives you a BlockAwareBinWindow and the implementation must
create a byte array of the requested size to fill it in. In our implementation
we use random bytes.</p>

<p>Now, let's create
the database again and run delete objects with the new configuration and look
at the database file again.</p>

<p><img src="FreespaceFiller_Example/after1.jpg"/></p>

<p>Now instead
of the real data we can only see some random bytes.</p>

<p>Don't
forget that custom freespace filler slows down IO operations.</p></div>
    </div>
    
  <p>Download example code:</p>        <p></p></body></html>