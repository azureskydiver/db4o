<?xml version="1.0" encoding="utf-8"?><html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="6" MadCap:lastHeight="2958" MadCap:lastWidth="1029">
<head><title>Custom Query Comparator	<link href="../../Resources/Stylesheets/prettify.css" type="text/css" rel="stylesheet" />		<script type="text/javascript" src="../../Resources/Code/prettify.js"></script></title></head>
<body onload="prettyPrint()">
     
       
        <h1>Custom Query Comparator</h1><p>Db4o allows using a custom comparator for query processing.
This can be useful for replacing the standard way of selecting query results,
for example, when a non-standard attribute type should be compared as string or
integer</p>

<p>The usage is best shown on an example. </p>

<p>Let's create a custom class containing string information:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/MyString.java/MyString.java.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/MyString.cs/MyString.cs.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/MyString.vb/MyString.vb.flsnp" />
</p><p MadCap:conditions="Primary:vb" />

<p>MyString class will be used for an attribute in the
following class:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/Record.java/Record.java.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/Record.cs/Record.cs.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/Record.vb/Record.vb.flsnp" />
</p><p MadCap:conditions="Primary:vb" />

<p>Let's save some Record objects to the database:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.java/storeRecords.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.cs/StoreRecords.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.vb/StoreRecords.flsnp" />
</p><p MadCap:conditions="Primary:vb" />

<p>Selecting the query results, we need to compare string
values contained in MyString objects. This can be configured with the following
setting:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.java/configure.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.cs/Configure.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.vb/Configure.flsnp" />
</p><p MadCap:conditions="Primary:vb" /><p>This piece of code registers an attribute provider for
special query behavior. </p>

<p>The query processor will compare the
object returned by the attribute provider instead of the actual object, both
for the constraint and the candidate persistent object.</p>

<p>The querying code will look like this:</p>

<p MadCap:conditions="Primary.Java">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.java/checkRecords.flsnp" />
</p><p MadCap:conditions="Primary:java" />

<p MadCap:conditions="Primary..NET,Primary.c#">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.cs/CheckRecords.flsnp" />
</p><p MadCap:conditions="Primary:cs" />

<p MadCap:conditions="Primary..NET,Primary.VB.NET">

<MadCap:snippetBlock src="../../Resources/Snippets/Custom Query Comparator/CompareExample.vb/CheckRecords.flsnp" />
</p><p MadCap:conditions="Primary:vb" />



<p>Using query comparator feature we can change the standard
way of selecting query results. This can be helpful for:</p>

<ul><li>querying user types using simple string or numeric
representation</li><li>encapsulating additional logic into querying algorithm.</li></ul>





 
     
    
  </body></html>