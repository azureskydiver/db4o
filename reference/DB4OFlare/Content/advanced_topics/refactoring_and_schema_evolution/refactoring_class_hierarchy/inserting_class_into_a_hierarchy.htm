<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="8" MadCap:lastHeight="1513" MadCap:lastWidth="531">
  <head></head>
  <body>
    <h1>
      <MadCap:keyword term="Refactoring:Insert Class Into A Hierarchy;Schema Evolution:Insert Class Into A Hierarchy" />Inserting Class Into A Hierarchy</h1>
    <p>In this example we have a Human class witch inherits from the Mammal class. Now we want to introduce a new Primate class and let the Human class inherit from it. </p>
    <p>
      <img src="../add-new-type-to-hierachy.png" />
    </p>
    <p>Unfortunately db4o doesn't support this kind of refactoring. We need to use a work-around. Basically we create a copy of the Human class with the new Inheritance-hierarchy and the copy the existing data over.</p>
    <h2>Step by Step</h2>
    <ol>
      <li>Create the new Primate class</li>
      <li>Create a copy of the Human class, for example HumanNew!</li>
      <li>Change the HumanNew class to inherit from the new Primate class instead of the Mammal class.</li>
      <li>After that, load all existing Human-instances, copy the values over to HumanNew instances. Store the HumanNew instance and delete the old Human-instances</li>
    </ol>
    <p>Now the objects have the new inheritance hierarchy. You can delete the old Human class.</p>
    <MadCap:snippetBlock src="../../../CodeExamples/strategies/refactoring/extendhierarchy/AddClassToHierarchy-copy-the-data-from-the-old-type-to-the-new-one.all.flsnp" />
    <MadCap:snippetBlock src="../../../Snippets/update_references_not_included.flsnp" />
  </body>
</html>