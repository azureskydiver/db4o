<project name="db4o-java1.2" basedir="." default="publish"  xmlns:ivy="antlib:fr.jayasoft.ivy.ant">
	
	<import file="../build-1.1/common-1.1.xml"/>
	
	<property file="${dir.j.jdk1.2}/build-1.1.properties" />
	
	<!--
	TODO 
	filehead
	
	<property name="bona" value="tempClassesDir" />
		-->
	
	<target name="debug" >
		<copyjava5 destDir="${tempSrcDir}" />
	</target>
	
	<target name="init" depends="clean">
		<tstamp />
		<initIvyDir/>
	</target>
	
	<target name="clean">
  	<cleanIvyDir/>
	</target>
	
	<target name="jar" depends="init">
		<copyjava1.2 destDir="${tempSrcDir}" />
		<buildjar 
			srcDir="${tempSrcDir}"
			jarPath="${coreJarPath}" 
			fork="yes"
			
			target="1.2"
			source="1.2"
		/>
		<delete dir="${tempSrcDir}" failonerror="true"/>
	</target>
	
	 <target name="configure" depends="init">
        <ivy:configure file="${ivy.conf.dir}/ivyconf.xml" />
   </target>
   
    <target name="resolve" depends="configure">
        <ivy:resolve file="${dir.j.jdk1.2}/ivy.xml"/>   
   		  <ivy:retrieve pattern="${ivy.retrieve.pattern}" conf="${ivy.configurations}" />
    </target>
    
    <target name="publish" depends="resolve, jar">
    	<copy file="${coreJarPath}" tofile="${signedJarPath}"/>
			<db4oSignJar jar="${signedJarPath}"/>
			
      <publishToIvy/>
      <antcall target="clean" />
    </target>
</project>