<project name="ivyTaskDef" basedir="." default=""  xmlns:ivy="antlib:fr.jayasoft.ivy.ant">
	<path id="ivy.lib.path">
  	<fileset dir="${common.build.dir}/lib" includes="*.jar"/>
  </path>
  <taskdef resource="fr/jayasoft/ivy/ant/antlib.xml" uri="antlib:fr.jayasoft.ivy.ant" classpathref="ivy.lib.path"/>
  
  <macrodef name="publishToIvy" description="">
		<attribute name="artifactsPattern" default="${artifactsPattern}"/>
		
		<sequential>
			<delete file="${defaultArtifactDir}/ivy.xml"/>
			<ivy:publish 
				artifactspattern="@{artifactsPattern}" 
				pubrevision="${db4o.version.dotted}" 
				resolver="projects"				
				status="release"
			/>
		</sequential>
	</macrodef>
	
	<macrodef name="cleanIvyDir" description="">
		<sequential>
			<delete dir="${defaultArtifactDir}"	failonerror="true"/>
			<delete dir="${ivy.lib.dir}" failonerror="true"/>
		</sequential>
	</macrodef>
	
	<macrodef name="initIvyDir" description="">
		<sequential>
			<mkdir dir="${defaultArtifactDir}" />
		</sequential>
	</macrodef>
</project>