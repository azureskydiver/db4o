<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>File Configuration</title>
    <link rel="stylesheet" type="text/css" href="../../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>File Configuration</h1><p>FileConfiguration/IFileConfiguration interface contains file-related configuration methods. These methods should be called for Embedded db4o object container or db4o object server. <br></p><span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void blobPath(String path) throws IOException;</code></p>

</span>



<p>configures the path to be used to store and read Blob data. For more information see <a href="../../implementation_strategies/type_handling/blobs.html" class="wikiLink">Blobs</a></p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void blockSize(int bytes)</code></p>

</span>



<p>sets the storage data blocksize for new object containers. The standard setting is 1 allowing for a maximum<br>database file size of 2GB. This value can be increased to allow larger database files, although some space will<br>be lost to padding because the size of some stored objects will not be an exact multiple of the block size. A <br>recommended setting for large database files is 8, since internal pointers have this length.<br>This setting is only effective when the database is first created.<br>The size can be any integer in range from 1 to 127.</p>

<span name="cs_wiki_filter" csw_filters="java">
<p>Java:</p>

<p><code>public void databaseGrowthSize(int bytes)</code></p>

</span>



<p>configures the size database files should grow in bytes, when no free slot is found within.<br>Tuning setting. Whenever no free slot of sufficient length can be found within the current database file, the database file's length is extended. This configuration setting configures by how much it should be extended, in bytes.<br>This configuration setting is intended to reduce fragmentation. Higher values will produce bigger database files and less fragmentation.<br>To extend the database file, a single byte array is created and written to the end of the file in one write operation. Be aware that a high setting will require allocating memory for this byte array.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void disableCommitRecovery();</code></p>

</span>



<p>turns commit recovery off.<br>db4o uses a two-phase commit algorithm. In a first step all intended changes are written to a free place in the database file, the "transaction commit record". In a second step the actual changes are performed. If the system breaks down during commit, the commit process is restarted when the database file is opened the next time.<br>On very rare occasions (possibilities: hardware failure or editing the database file with an external tool) the transaction commit record may be broken. In this case, this method can be used to try to open the database file without commit recovery. The method should only be used in emergency situations after consulting db4o support.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public FreespaceConfiguration freespace;</code></p>

</span>



<p>Returns freespace configuration for this file configuration.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void generateUUIDs(ConfigScope)</code></p>

</span>



<p>configures db4o to generate UUIDs for stored objects. For more information see <a href="../../implementation_strategies/ids_and_uuids/unique_universal_ids.html" class="wikiLink">Unique Universal IDs</a>.</p>

<span name="cs_wiki_filter" csw_filters="java">
<p>Java:</p>

<p><code>public void generateVersionNumbers(ConfigScope)</code></p>

</span>



<p>configures db4o to generate version numbers for stored objects. For more
information see
<a href="../../implementation_strategies/ids_and_uuids/unique_universal_ids.html" class="wikiLink">Unique Universal IDs</a>.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void lockDatabaseFile(boolean flag)</code></p>

</span>



<p>can be used to turn the database file locking thread off. </p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void readOnly(boolean flag)</code></p>

</span>



<p>turns readOnly mode on and off.<br>Readonly mode allows to open an unlimited number of reading processes on one database file. It is also convenient for deploying db4o database files on CD-ROM.</p>

In client-server environment this setting should be used on client side.

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void recoveryMode(boolean flag)</code></p>

</span>



<p>turns recovery mode on and off.<br>Recovery mode can be used to try to retrieve as much as possible<br>out of an already corrupted database. In recovery mode internal <br>checks are more relaxed. Null or invalid objects may be returned <br>instead of throwing exceptions.<br>Use this method with care as a last resort to get data out of a<br>corrupted database.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void reserveStorageSpace(long byteCount)</code></p>

</span>



<p>tuning feature only: reserves a number of bytes in database files. The global setting is used for the creation of new database files. Without this setting storage space will be allocated continuously as necessary.<br>The allocation of a fixed number of bytes at one time makes it more likely that the database will be stored in one<br>chunk on the mass storage. Less read/write head movement can result in improved performance.<br>Note: Allocated space will be lost on abnormal termination of the database engine (hardware crash, VM crash). A Defragment run will recover the lost space. For the best possible performance, this method should be called before the Defragment run to configure the allocation of storage space to be slightly greater than the anticipated<br>database file size.</p>

<span name="cs_wiki_filter" csw_filters="java">

<p>Java:</p>

<p><code>public void storage(Storage storage);</code></p>

<p><code>public Storage storage();</code></p>

</span>



<p>Allows to configure a custom IO byte storage mechanism. One of the db4o implementations can be used, i.e. MemoryStorage, NonFlushingStorage etc. or a user-implemented storage based on Storage/IStorage interface. Possible usecases: improved performance with a native library, encryption, mirrored storage to 2 files etc.</p></div>
    </div>
    <div id="footer">
					This revision (13) was last Modified 2009-04-01T09:47:16 by Tetyana.
				</div>
  </body>
</html>