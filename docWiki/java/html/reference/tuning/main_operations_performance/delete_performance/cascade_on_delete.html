<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Cascade On Delete</title>
    <link rel="stylesheet" type="text/css" href="../../../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Cascade On Delete</h1><script>
//We attach this function to a browser object as a variable so that if multiple of these blocks are
//present on the same page, then they will simply over-write eachother with the same function instead
//of generating a naming collision.
window.WikiCodeFormattingCopyToClipboard = function copyToClipboard(sID){
	var sContent = document.getElementById(sID).innerText;
	if( window.clipboardData && clipboardData.setData )
	{
		clipboardData.setData("Text", sContent);
	}
	else
	{
		alert("You must enable javascript access to your clipboard for this feature to work. Please referr to your browser documentation or Google search for instructions.");
	}
}
</script><p><br></p><p>If you are using cascadeOnDelete option and explicit deletion
of one object causes cascaded delete on several others, you may expect slower
execution:</p>

<span name="cs_wiki_filter" csw_filters="java">

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">runDeleteDepthTest</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> runDeleteDepthTest()</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_RunDeleteDepthTest_225_90_33_864_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Delete test with objects of different depth</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      configureDepthTest();
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      initShallowObject();
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Deleting 1000 of </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> _count </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> objects with </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> _depth </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> levels of embedded objects:</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      clean();
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      open();
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      store();
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Amount of objects left: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> countObjects());
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      deleteAny(</span><span style="color: #000000;">1000</span><span style="color: #000000;">);
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Amount of objects left: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> countObjects());
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      close();
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      clean();
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      init();
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Deleting 1000 of </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> _count </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> objects with </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> _depth </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> levels of embedded objects:</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      open();
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      store();
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Amount of objects left: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> countObjects());
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      deleteAny(</span><span style="color: #000000;">1000</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Amount of objects left: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> countObjects());
</span><span style="color: #008080;">23</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      close();
</span><span style="color: #008080;">24</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      
</span><span style="color: #008080;">25</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">configureDepthTest</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> configureDepthTest()</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_ConfigureDepthTest_319_90_33_271_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Configuration config </span><span style="color: #000000;">=</span><span style="color: #000000;"> Db4o.configure(); 
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        config.lockDatabaseFile(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        config.io(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> MemoryIoAdapter());
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        config.flushFileBuffers(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        config.objectClass(Item.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).cascadeOnDelete(</span><span style="color: #0000FF;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">7</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">initShallowObject</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> initShallowObject()</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_InitShallowObject_413_89_32_123_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      _count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">10000</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        _depth </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        _isClientServer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">init</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> init()</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_Init_506_76_19_110_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      _count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">10000</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        _depth </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        _isClientServer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div><div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">DeletePerformanceBenchmark.java: <span class="fscMemberName">deleteAny</span></span></div><div class="fscCode"><pre ID="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text').style.display='inline';"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> deleteAny(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i) </span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_30_245_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> time </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> counter </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text').style.display='inline';"/><img id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text').style.display='none'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Image').style.display='inline'; document.getElementById('....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text').style.display='inline';"/>      </span><span style="color: #0000FF;">while</span><span style="color: #000000;"> (counter</span><span style="color: #000000;">++</span><span style="color: #000000;"> </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> i)</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="....PerformanceJava.ZipsDeletePerformanceBenchmark.Java_DeletePerformanceBenchmark.Java_DeleteAny_582_81_100_167_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> id </span><span style="color: #000000;">=</span><span style="color: #000000;"> selectAny();
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        time </span><span style="color: #000000;">+=</span><span style="color: #000000;"> deleteById(id);
</span><span style="color: #008080;">7</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>      }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">8</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Deleted </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> i </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> objects in: </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> time </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms.</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">9</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>  }</span></span></div></pre></div></div>

</span>

<p>Note that in the first part of the test each object
deletion only includes a single object. Therefore, when we delete a 1000
objects the amount of the objects in the database is 1000 less. In the second
part each object deletion will trigger deletion of all field objects
(cascadeOnDelete option), therefore the amount of objects deleted from the
database can be anywhere between 1000 (only lowest level objects) and 3000(all
top level objects with their field objects).</p>

<p><i>The results from the test machine:</i></p>

<p><i>Delete test with
objects of different depth</i></p>

<p><i>Deleting 1000 of
10000 objects with 1 levels of embedded objects:</i></p>

<p><i>Store 10000
objects: 528ms</i></p>

<p><i>Amount of
objects left: 10000</i></p>

<p><i>Deleted 1000
objects in: 197 ms.</i></p>

<p><i>Amount of
objects left: 9000</i></p>

<p><i>Deleting 1000 of
10000 objects with 3 levels of embedded objects:</i></p>

<p><i>Store 30000
objects: 1693ms</i></p>

<p><i>Amount of
objects left: 39000</i></p>

<p><i>Deleted 1000
objects in: 340 ms.</i></p>

<p><i>Amount of
objects left: 36978</i></p>



</div>
    </div>
    <div id="footer">
					This revision (2) was last Modified 2008-05-27T15:01:19 by Tetyana.
				</div>
  </body>
</html>