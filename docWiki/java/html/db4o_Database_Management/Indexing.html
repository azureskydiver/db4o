<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Indexing</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Indexing</h1>
<P>db4o allows to index fields to provide maximum querying performance. To request an index to be created, you would issue the following API method call in your global <a href="Configuration.html" class="wikiLink changedTopic">db4o configuration method</a><sup class="changedTopic" title="Modified 02-16-2007, 12:58 AM">updated</sup> before you open an ObjectContainer/ObjectServer:</P>
<P>// assuming</P>
<P><code>class Foo{<BR>&nbsp;&nbsp;&nbsp;&nbsp; String bar;<BR>}</code></P>
<span class="java"></P>
<P>Java: <code>Db4o.configure().objectClass(Foo.class).objectField("bar").indexed(true); </code></P>
<P></span>

<P>If the configuration is set in this way, an index on the Foo#bar field will be created (if not present already) the next time you open an ObjectContainer/ObjectServer and you use the Foo class the first time in your applcation. </P>
<P>Contrary to all other <a href="Configuration.html" class="wikiLink changedTopic">configuration calls</a><sup class="changedTopic" title="Modified 02-16-2007, 12:58 AM">updated</sup> indexes - once created - will remain in a database even if the index configuration call is not issued before opening an ObjectContainer/ObjectServer. </P>
<P>To drop an index you would also issue a configuration call in your db4o configuration method:</P>
<span class="java"></P>
<P>Java: <code>Db4o.configure().objectClass(Foo.class).objectField("bar").indexed(false);</code></P>
<P></span> </P>

<P>Actually dropping the index will take place the next time the respective class is used.db4o will tell you when it creates and drops indexes, if you choose a message level of 1 or higher:</P>
<span class="java"></P>
<P>Java: <code>Db4o.configure().messageLevel(1);</code></P>
<P></span>

<P>For creating and dropping indexes on large amounts of objects there are two possible strategies:</P>
<OL>
<LI>Import all objects with indexing off, configure the index and reopen the ObjectContainer/ObjectServer.</LI>
<LI>Import all objects with indexing turned on and commit regularly for a fixed amount of objects (~10,000).</LI></OL>
<OL>
<LI>will be faster.</LI>
<LI>will keep memory consumption lower.</LI></OL>
<P>For more information see <a href="Performance_Tuning/Enable_Field_Indexes.html" class="wikiLink">Enable Field Indexes</a> chapter.</P></div>
    </div>
    <div id="footer">
					This revision (12) was last Modified 2007-02-16T00:58:01 by German Viscuso.
				</div>
  </body>
</html>