<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Enable Field Indexes</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Enable Field Indexes</h1><div id="TOC"><div id="TOCinner"><span class="TOCtitle">Contents</span><div class="TOCcontents"><ul><li><a href ="#Advantage">Advantage</a></li><li><a href ="#Alternate Strategies">Alternate Strategies</a></li></ul></li></ul></div></div></div><script>
//We attach this function to a browser object as a variable so that if multiple of these blocks are
//present on the same page, then they will simply over-write eachother with the same function instead
//of generating a naming collision.
window.WikiCodeFormattingCopyToClipboard = function copyToClipboard(sID){
	var sContent = document.getElementById(sID).innerText;
	if( window.clipboardData && clipboardData.setData )
	{
		clipboardData.setData("Text", sContent);
	}
	else
	{
		alert("You must enable javascript access to your clipboard for this feature to work. Please referr to your browser documentation or Google search for instructions.");
	}
}
</script>

<p>For class Car with field "pilot":</p>

<span class="java"></p>
<p>Java: <code>Db4o.configure().objectClass(Car.class).objectField("pilot").indexed(true)</code></p>
<p></span>



<a name="Advantage"></a><h2>Advantage</h2>
<p>The fastest way to improve the performance of your queries is to enable indexing on some of your class's key fields. You can read how to do it in <a href="../Indexing.html" class="wikiLink">Indexing</a> chapter of this documentation.</p>
<p>
Further step of index tuning is to optimize indexes for Class.Field1.Field2 access. What will give us the best performance:</p>
<ul>
<li>
index on Field1;</li>
<li>index on Field2;</li>
<li>index on both fields?</li>
</ul>
<p>To find the answer let's consider classes Car and Pilot from the previous chapters. In order to see indexing influence we will put 10000 new cars in our storage (note that for db4o version &gt; 5.6 the amount of objects&nbsp; should be much more to see the differences in execution time due to BTree based index optimized for big amounts of data ):</p>

<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">fillUpDB</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> fillUpDB()</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_29_277_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> File(Util.YAPFILENAME).delete();
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        ObjectContainer db</span><span style="color: #000000;">=</span><span style="color: #000000;">Db4o.openFile(Util.YAPFILENAME);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_148_219_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Open_Text').style.display='inline';"/>          </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #000000;">0</span><span style="color: #000000;">; i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">10000</span><span style="color: #000000;">;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_185_215_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          AddCar(db,i);
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>    }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FillUpDB_1042_58_236_271_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.close();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>
<p></span>

 </p>



<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">addCar</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> AddCar(ObjectContainer db, </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> points)
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Open_Text').style.display='inline';"/>  </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_AddCar_1154_56_60_152_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    Car car </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Car(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">BMW</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    car.setPilot(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Pilot(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Tester</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">, points));
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    db.set(car);
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>  }</span></span></div></pre></div></div>
<p></span>





<p>Now we have lots of similar cars differing only in the amount of pilots' points - that will be our constraint for the query.</p>

<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">noIndex</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> noIndex() </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_29_575_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      ObjectContainer db</span><span style="color: #000000;">=</span><span style="color: #000000;">Db4o.openFile(Util.YAPFILENAME);
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_100_517_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        Query query </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query();
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.constrain(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).constrain(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Integer(</span><span style="color: #000000;">99</span><span style="color: #000000;">));
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      ObjectSet  result </span><span style="color: #000000;">=</span><span style="color: #000000;"> query.execute();
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;">  diff </span><span style="color: #000000;">=</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> t1;
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Test 1: no indexes</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Execution time=</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">+</span><span style="color: #000000;">diff </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_NoIndex_1394_57_534_569_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.close();
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>
<p></span>





<p>You can check execution time on your workstation using interactive version of this tutorial.</p>
<p>Let's create index for pilots and their points and test the same query again:</p>

<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">fullIndex</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> fullIndex() </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_31_760_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Pilot.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        ObjectContainer db</span><span style="color: #000000;">=</span><span style="color: #000000;">Db4o.openFile(Util.YAPFILENAME);
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_270_702_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        Query query </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query();
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.constrain(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).constrain(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Integer(</span><span style="color: #000000;">99</span><span style="color: #000000;">));
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      ObjectSet  result </span><span style="color: #000000;">=</span><span style="color: #000000;"> query.execute();
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;">  diff </span><span style="color: #000000;">=</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> t1;
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Test 2: index on pilot and points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Execution time=</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">+</span><span style="color: #000000;">diff </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_FullIndex_1689_59_719_754_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.close();
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>
<p></span>





<p>That result is considerably better and proves the power of indexing.</p>
<p>
But do we really need 2 indexes? Will single pilot or points index suffice? Let's test this as well:</p>

<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">pilotIndex</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> pilotIndex() </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_32_751_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Pilot.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        ObjectContainer db</span><span style="color: #000000;">=</span><span style="color: #000000;">Db4o.openFile(Util.YAPFILENAME);
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_272_693_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        Query query </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query();
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.constrain(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).constrain(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Integer(</span><span style="color: #000000;">99</span><span style="color: #000000;">));
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      ObjectSet  result </span><span style="color: #000000;">=</span><span style="color: #000000;"> query.execute();
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;">  diff </span><span style="color: #000000;">=</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> t1;
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Test 3: index on pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Execution time=</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">+</span><span style="color: #000000;">diff </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PilotIndex_1987_60_710_745_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.close();
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>
<p></span>





<span class="java"></p>
<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">IndexedExample.java: <span class="fscMemberName">pointsIndex</span></span></div><div class="fscCode"><pre ID="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> pointsIndex() </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_33_753_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      Db4o.configure().objectClass(Pilot.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">).objectField(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).indexed(</span><span style="color: #0000FF;">true</span><span style="color: #000000;">);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        ObjectContainer db</span><span style="color: #000000;">=</span><span style="color: #000000;">Db4o.openFile(Util.YAPFILENAME);
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_273_695_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>        Query query </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query();
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.constrain(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      query.descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).constrain(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Integer(</span><span style="color: #000000;">99</span><span style="color: #000000;">));
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      ObjectSet  result </span><span style="color: #000000;">=</span><span style="color: #000000;"> query.execute();
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> System.currentTimeMillis();
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #0000FF;">long</span><span style="color: #000000;">  diff </span><span style="color: #000000;">=</span><span style="color: #000000;"> t2 </span><span style="color: #000000;">-</span><span style="color: #000000;"> t1;
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Test 4: index on points</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Execution time=</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">+</span><span style="color: #000000;">diff </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> ms</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Open_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Closed_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Closed_Text').style.display='inline';"/><img id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Closed_Text').style.display='none'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Open_Image').style.display='inline'; document.getElementById('IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="IndexesJava.ZipsIndexedExample.Java_IndexedExample.Java_PointsIndex_2096_61_712_747_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.close();
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>    }</span></span></div></pre></div></div>
<p></span>





<p>Single index does not increase query performance on second level fields.</p>
<p>
To maximize retrieval performance on encapsulated fields of different levels of enclosure</p>
<p>Class.Field1.Field2.Field3(.FieldN)</p>
<p>indexes for each field level should be created:</p>
<p>Class.Field1.Indexed(true) </p>
<p>Field1Class.Field2.Indexed(true)</p>
<p>Field2Class.Field3.Indexed(true)</p>
<p>. . .</p>
<p>Field(N-1)Class.FieldN.Indexed(true)</p>
<a name="Alternate Strategies"></a><h2>Alternate Strategies</h2>
<p>Field indexes dramatically improve query performance but they may considerably reduce storage and update performance. The best way to decide where to put the indexes is to test them on completed application with typical typical data load.</p></div>
    </div>
    <div id="footer">
					This revision (10) was last Modified 2007-01-01T09:50:46 by Tetyana.
				</div>
  </body>
</html>