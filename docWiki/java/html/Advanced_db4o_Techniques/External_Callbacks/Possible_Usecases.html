<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Possible Usecases</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Possible Usecases</h1><div id="TOC"><div id="TOCinner"><span class="TOCtitle">Contents</span><div class="TOCcontents"><ul><li><a href ="#Cascaded Behavior">Cascaded Behavior</a></li><li><a href ="#Referential Integrity">Referential Integrity</a></li><li><a href ="#Query Statistics">Query Statistics</a></li></ul></li></ul></div></div></div><script>
//We attach this function to a browser object as a variable so that if multiple of these blocks are
//present on the same page, then they will simply over-write eachother with the same function instead
//of generating a naming collision.
window.WikiCodeFormattingCopyToClipboard = function copyToClipboard(sID){
	var sContent = document.getElementById(sID).innerText;
	if( window.clipboardData && clipboardData.setData )
	{
		clipboardData.setData("Text", sContent);
	}
	else
	{
		alert("You must enable javascript access to your clipboard for this feature to work. Please referr to your browser documentation or Google search for instructions.");
	}
}
</script><p></p>

<a name="Cascaded Behavior"></a><h2>Cascaded Behavior</h2>

<p>You
can use different object events to initiate cascaded behavior on update,
activate, delete. The following example shows how to ensure that all the
referenced objects are deleted when the parent object is deleted:</p>

<span class="java"></p>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">CallbacksExample.java: <span class="fscMemberName">testCascadedDelete</span></span></div><div class="fscCode"><pre ID="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> testCascadedDelete()</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_39_937_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    fillDB();
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> ObjectContainer db </span><span style="color: #000000;">=</span><span style="color: #000000;"> Db4o.openFile(YAPFILENAME);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Open_Text').style.display='inline';"/>    </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_116_905_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> check the contents of the database</span><span style="color: #008000;">
</span><span style="color: #008080;">06</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      ObjectSet result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.get(</span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      EventRegistry registry </span><span style="color: #000000;">=</span><span style="color: #000000;">  EventRegistryFactory.forObjectContainer(db);
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> register an event handler, which will delete the pilot when his car is deleted </span><span style="color: #008000;">
</span><span style="color: #008080;">11</span><span style="color: #008000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Open_Text').style.display='inline';"/></span><span style="color: #000000;">      registry.deleted().addListener(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> EventListener4() </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_437_675_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> onEvent(Event4 e, EventArgs args) </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_489_670_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          ObjectEventArgs queryArgs </span><span style="color: #000000;">=</span><span style="color: #000000;"> ((ObjectEventArgs) args);
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          Object obj </span><span style="color: #000000;">=</span><span style="color: #000000;"> queryArgs.object();
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Open_Text').style.display='inline';"/>          </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (obj </span><span style="color: #0000FF;">instanceof</span><span style="color: #000000;"> Car)</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_616_664_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            db.delete(((Car)obj).getPilot());
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>          }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>      }</span></span><span style="color: #000000;">);
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> delete all the cars</span><span style="color: #008000;">
</span><span style="color: #008080;">21</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">22</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Open_Text').style.display='inline';"/>      </span><span style="color: #0000FF;">while</span><span style="color: #000000;">(result.hasNext()) </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_764_815_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">23</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>              db.delete(result.next());
</span><span style="color: #008080;">24</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>          }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">25</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> check if the database is empty</span><span style="color: #008000;">
</span><span style="color: #008080;">26</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.get(</span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">27</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">28</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Open_Text').style.display='inline';"/>    }</span></span><span style="color: #000000;"> </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testCascadedDelete_297_72_914_934_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">29</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      db.close();
</span><span style="color: #008080;">30</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>    }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">31</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>  }</span></span></div></pre></div></div>

<p></span>






<a name="Referential Integrity"></a><h2>Referential Integrity</h2>

<p>Db4o does not have a built-in referential integrity checking
mechanism. Luckily EventRegistry gives you access to all the necessary events
to implement it. You will just need to trigger validation on create, update or
delete and cancel the action if the integrity is going to be broken.</p>

<p>For example, if Car object is referencing Pilot and the
referenced object should exist, this can be ensured with the following handler
in deleting() event:</p>

<span class="java"></p>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">CallbacksExample.java: <span class="fscMemberName">testIntegrityCheck</span></span></div><div class="fscCode"><pre ID="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Open_Text').style.display='inline';"/><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> testIntegrityCheck()</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_39_1297_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    fillDB();
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>    </span><span style="color: #0000FF;">final</span><span style="color: #000000;"> ObjectContainer db </span><span style="color: #000000;">=</span><span style="color: #000000;"> Db4o.openFile(YAPFILENAME);
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Open_Text').style.display='inline';"/>    </span><span style="color: #0000FF;">try</span><span style="color: #000000;"> </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_116_1265_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      EventRegistry registry </span><span style="color: #000000;">=</span><span style="color: #000000;">  EventRegistryFactory.forObjectContainer(db);
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> register an event handler, which will stop deleting a pilot when it is referenced from a car </span><span style="color: #008000;">
</span><span style="color: #008080;">07</span><span style="color: #008000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Open_Text').style.display='inline';"/></span><span style="color: #000000;">      registry.deleting().addListener(</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> EventListener4() </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_348_906_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Open_Text').style.display='inline';"/>        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> onEvent(Event4 e, EventArgs args) </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_400_901_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          CancellableObjectEventArgs cancellableArgs </span><span style="color: #000000;">=</span><span style="color: #000000;"> ((CancellableObjectEventArgs) args);
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>          Object obj </span><span style="color: #000000;">=</span><span style="color: #000000;"> cancellableArgs.object();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Open_Text').style.display='inline';"/>          </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (obj </span><span style="color: #0000FF;">instanceof</span><span style="color: #000000;"> Pilot)</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_563_895_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Query q </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query();
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            q.constrain(Car.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            q.descend(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">pilot</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">).constrain(obj);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            ObjectSet result </span><span style="color: #000000;">=</span><span style="color: #000000;"> q.execute();
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Open_Text').style.display='inline';"/>            </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (result.size() </span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> </span><span style="color: #000000;">0</span><span style="color: #000000;">) </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_731_888_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>              System.out.println(</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">Object </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;">  (Pilot)obj </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">&quot;</span><span style="color: #000000;"> can't be deleted as object container has references to it</span><span style="color: #000000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>              cancellableArgs.cancel();
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>          }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>        }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">22</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>      }</span></span><span style="color: #000000;">);
</span><span style="color: #008080;">23</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      
</span><span style="color: #008080;">24</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> check the contents of the database</span><span style="color: #008000;">
</span><span style="color: #008080;">25</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      ObjectSet result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.get(</span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">26</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">27</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      
</span><span style="color: #008080;">28</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> try to delete all the pilots</span><span style="color: #008000;">
</span><span style="color: #008080;">29</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.query(Pilot.</span><span style="color: #0000FF;">class</span><span style="color: #000000;">);
</span><span style="color: #008080;">30</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Open_Text').style.display='inline';"/>      </span><span style="color: #0000FF;">while</span><span style="color: #000000;">(result.hasNext()) </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1114_1165_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">31</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>              db.delete(result.next());
</span><span style="color: #008080;">32</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>          }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">33</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      </span><span style="color: #008000;">//</span><span style="color: #008000;"> check if any of the objects were deleted</span><span style="color: #008000;">
</span><span style="color: #008080;">34</span><span style="color: #008000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">      result </span><span style="color: #000000;">=</span><span style="color: #000000;"> db.get(</span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">35</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      listResult(result);
</span><span style="color: #008080;">36</span><span style="color: #000000;"><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Open_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Open_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Closed_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Closed_Text').style.display='inline';"/><img id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Closed_Image" src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Closed_Text').style.display='none'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Open_Image').style.display='inline'; document.getElementById('CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Open_Text').style.display='inline';"/>    }</span></span><span style="color: #000000;"> </span><span style="color: #0000FF;">finally</span><span style="color: #000000;"> </span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="CallbacksJavaZipsCallbacksExampleJava_CallbacksExampleJava_testIntegrityCheck_926_72_1274_1294_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">37</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>      db.close();
</span><span style="color: #008080;">38</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>    }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">39</span><span style="color: #000000;"><img src="../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>  }</span></span></div></pre></div></div>

<p></span>




You can also add handlers for creating() and updating()
events for a Car object to make sure that the pilot field is not null.&nbsp;
<a name="Query Statistics"></a><h2>Query Statistics </h2>

<p>QueryStarted and
QueryFinished events can be used to gather various statistics about query
execution.</p>

<p>For example you can use queryStarted() and queryFinished() events to calculate query
time, and activated() event to count objects activated in a query.</p>

<span class="java"></p>

<p>Java version provides an example of query events usage in QueryStats class from tools package.</p>

<p>In
order to use QueryStats:</p>

<ol>
<li>Connect a QueryStats object
     to the ObjectContainer</li>

<p><code>QueryStats
stats = new QueryStats();</code></p>

<p><code>stats.connect(db);</code></p>

<li>Execute your query</li>

<p><code>ObjectSet
result = q.execute();</code></p>

<li>Get the metrics from the
     QueryStats object</li>

<p><code>long
executionTime = stats.executionTime();</code></p>

<p><code>int
activationCount = stats.activationCount();</code></p>

<li>After the work is done you
     can disconnect QueryStats from the ObjectContainer</li>

<p><code>stats.disconnect();</code></p>
</ol>

<p></span>

<p>There are many other usecases for external callbacks,
including:</p>

<ul>
<li>assigning customary unique IDs for external referencing</li>

<li>delayed deletion (objects are marked for deletion when
delete(object) is called and cleaned out of database in a later maintenance
operation)</li>

<li>ensuring object fields uniqueness within the same class
etc.</li>
</ul></div>
    </div>
    <div id="footer">
					This revision (6) was last Modified 2006-12-06T19:36:31 by Tetyana.
				</div>
  </body>
</html>