<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Marshallers</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Marshallers</h1><p>Db4o marshaller implementation uses
reflection to detect class fields.&nbsp; This
approach is universal, but reflection usage imposes a certain performance
penalty. In some cases you may want to improve the performance using custom
marshallers through a plug-in interface:</p>



<span class="cs"></p><p>c#:&nbsp;</p>

<p><code>Db4oFactory.Configure().ObjectClass(typeof(YourClass)).MarshallWith(yourMarshaller);</code></p>

<p></span><span class="vb"></p><p>VB:&nbsp;</p>


<p><code>Db4oFactory.Configure().ObjectClass(GetType(YourClass)).MarshallWith(yourMarshaller)</code></p>


<p></span><p>Custom marshaller provides a functionality to convert object fields to a byte array and back. This approach allows to achieve a better performance due to the following:</p><ul><li>reflection is not used to detect object fields;</li><li>only the required fields need to be marshalled.<br></li></ul><p>However there are certain limitations:</p><ul><li>custom marshaller is not compatible with the use of a translator;</li><li>quering for fields is not possible when a custom marshaller is used.&nbsp;</li></ul>

<p>Custom marshallers should implement
an ObjectMarshaller interface:</p>



<span class="cs"></p><p>c#:&nbsp;</p>

<p><code> public class CustomMarshaller: IObjectMarshaller</code></p>

<p></span><span class="vb"></p><p>VB:&nbsp;</p>


<p><code> Class CustomMarshaller</code> </p><p><code>Implements IObjectMarshaller</code></p>


<p></span>
<p>To simplify the task of creating
custom marshallers db4o provides a <a href="https://source.db4o.com/db4o/trunk/db4oj/core/src/com/db4o/foundation/PrimitiveCodec.java">PrimitiveCodec</a> class,
which implements write and read functions for int and long values.</p><p><div class="childTopicList">More Reading:<ul>
<li><p><a href="../Advanced_Db4o_Techniques/Marshallers/Custom_Marshaller_Implementation.html" class="wikiLink">Custom Marshaller Implementation</a></p></li>
<li><p><a href="../Advanced_Db4o_Techniques/Marshallers/Custom_Marshaller_Usage.html" class="wikiLink">Custom Marshaller Usage</a></p></li>
</ul></div>
</p>

</div>
    </div>
    <div id="footer">
					This revision (7) was last Modified 2007-03-02T17:39:23 by Tetyana.
				</div>
  </body>
</html>