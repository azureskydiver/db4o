<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Different Query Types</title>
    <link rel="stylesheet" type="text/css" href="../../../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Different Query Types</h1><script>
//We attach this function to a browser object as a variable so that if multiple of these blocks are
//present on the same page, then they will simply over-write eachother with the same function instead
//of generating a naming collision.
window.WikiCodeFormattingCopyToClipboard = function copyToClipboard(sID){
	var sContent = document.getElementById(sID).innerText;
	if( window.clipboardData && clipboardData.setData )
	{
		clipboardData.setData("Text", sContent);
	}
	else
	{
		alert("You must enable javascript access to your clipboard for this feature to work. Please referr to your browser documentation or Google search for instructions.");
	}
}
</script>

<p>db4o provides different query syntaxes: Query By Example,
SODA, Native Queries and LINQ (for .NET 3.5 and higher). &nbsp;Under the hood all these syntaxes are
converted to SODA. The conversion can be very straightforward (as in case of
QBE), or pretty sophisticated (some Native queries). The fact that conversion
takes place and can be more or less complex affects the performance of queries
expressed with different syntax. Another factor affecting the performance can
be using unoptimized Native Queries: this can happen if the query is too
complex to analyze or when optimization is disabled through configuration.
Optimization is also applicable to LINQ queries, i.e. some of LINQ queries are
currently too complex to analyze and optimize. In cases when optimization does
not happen, the query is run against all instances of an object in the database,
which is quite slow and consumes a lot of RAM.</p>



<span name="cs_wiki_filter" csw_filters="net">

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">QueryPerformanceBenchmark.cs: <span class="fscMemberName">RunDifferentQueriesTest</span></span></div><div class="fscCode"><pre ID="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> RunDifferentQueriesTest()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Open_Text').style.display='inline';"/>        </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_47_2192_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Init();
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Clean();
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Storing objects as a bulk:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Open(Configure());
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Store();
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Close();
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Open(Configure());
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//
</span><span style="color: #008080;">13</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Query by example:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Item item </span><span style="color: #000000;">=</span><span style="color: #000000;"> (Item)objectContainer.QueryByExample(
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Item(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">level1/1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, </span><span style="color: #0000FF;">null</span><span style="color: #000000;">)).Next();
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Select 1 object QBE: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> item._name);
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//
</span><span style="color: #008080;">20</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">SODA:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">22</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            IQuery query </span><span style="color: #000000;">=</span><span style="color: #000000;"> objectContainer.Query();
</span><span style="color: #008080;">23</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            query.Constrain(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(Item));
</span><span style="color: #008080;">24</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            query.Descend(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">_name</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">).Constrain(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">level1/1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">25</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            item </span><span style="color: #000000;">=</span><span style="color: #000000;"> (Item)query.Execute().Next();
</span><span style="color: #008080;">26</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Select 1 object SODA: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> item._name);
</span><span style="color: #008080;">27</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">28</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//
</span><span style="color: #008080;">29</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">LINQ: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">30</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">31</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            var resultLINQ </span><span style="color: #000000;">=</span><span style="color: #000000;"> from Item it </span><span style="color: #0000FF;">in</span><span style="color: #000000;"> objectContainer
</span><span style="color: #008080;">32</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                         </span><span style="color: #0000FF;">where</span><span style="color: #000000;"> it._name.Equals(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">level1/1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">)
</span><span style="color: #008080;">33</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                         select it;
</span><span style="color: #008080;">34</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            
</span><span style="color: #008080;">35</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            IEnumerator</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Item</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> resultLINQ.GetEnumerator();
</span><span style="color: #008080;">36</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (i.MoveNext())
</span><span style="color: #008080;">37</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Open_Text').style.display='inline';"/>            </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1259_1374_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">38</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                item </span><span style="color: #000000;">=</span><span style="color: #000000;"> i.Current;
</span><span style="color: #008080;">39</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Select 1 object LINQ: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> item._name);
</span><span style="color: #008080;">40</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">41</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            
</span><span style="color: #008080;">42</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            
</span><span style="color: #008080;">43</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//
</span><span style="color: #008080;">44</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Native Query:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">45</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">46</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            IList</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Item</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> result </span><span style="color: #000000;">=</span><span style="color: #000000;"> objectContainer.Query</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Item</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">(</span><span style="color: #0000FF;">delegate</span><span style="color: #000000;">(Item it)
</span><span style="color: #008080;">47</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Open_Text').style.display='inline';"/>            </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_1588_1655_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">48</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> it._name.Equals(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">level1/1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">49</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">);
</span><span style="color: #008080;">50</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            item </span><span style="color: #000000;">=</span><span style="color: #000000;"> result[</span><span style="color: #800080;">0</span><span style="color: #000000;">];
</span><span style="color: #008080;">51</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Select 1 object NQ: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> item._name);
</span><span style="color: #008080;">52</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Close();
</span><span style="color: #008080;">53</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">54</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//
</span><span style="color: #008080;">55</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            Open(ConfigureUnoptimizedNQ());
</span><span style="color: #008080;">56</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Native Query Unoptimized:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">57</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">58</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            result </span><span style="color: #000000;">=</span><span style="color: #000000;"> objectContainer.Query</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Item</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">(</span><span style="color: #0000FF;">delegate</span><span style="color: #000000;">(Item it)
</span><span style="color: #008080;">59</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Open_Text').style.display='inline';"/>            </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_RunDifferentQueriesTest_984_92_2001_2068_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">60</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> it._name.Equals(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">level1/1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">61</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">);
</span><span style="color: #008080;">62</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            item </span><span style="color: #000000;">=</span><span style="color: #000000;"> result[</span><span style="color: #800080;">0</span><span style="color: #000000;">];
</span><span style="color: #008080;">63</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Select 1 object NQ: </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> item._name);
</span><span style="color: #008080;">64</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">65</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Close();
</span><span style="color: #008080;">66</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">QueryPerformanceBenchmark.cs: <span class="fscMemberName">Init</span></span></div><div class="fscCode"><pre ID="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Init()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Open_Text').style.display='inline';"/>        </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Init_1080_73_28_238_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _filePath </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">performance.db4o</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//</span><span style="color: #008000;"> amount of objects</span><span style="color: #008000;">
</span><span style="color: #008080;">05</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            _count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">10000</span><span style="color: #000000;">;
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//</span><span style="color: #008000;"> depth of objects</span><span style="color: #008000;">
</span><span style="color: #008080;">07</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            _depth </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _isClientServer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">QueryPerformanceBenchmark.cs: <span class="fscMemberName">Configure</span></span></div><div class="fscCode"><pre ID="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> IConfiguration Configure()
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Open_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Closed_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Closed_Text').style.display='inline';"/><img id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Closed_Text').style.display='none'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Open_Image').style.display='inline'; document.getElementById('..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Open_Text').style.display='inline';"/>        </span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..QueryPerformanceCS.ZipsQueryPerformanceBenchmark.Cs_QueryPerformanceBenchmark.Cs_Configure_1157_78_43_149_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            IConfiguration config </span><span style="color: #000000;">=</span><span style="color: #000000;"> Db4oFactory.NewConfiguration();
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> config;
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

</span>

<p>The following results were obtained on a test machine:</p>

<p><i>Storing objects as a
bulk:</i></p>

<p><i>Store 30000 objects:
5337 ms</i></p>

<p><i>Query by example:</i></p>

<p><i>Select 1 object QBE:
level1/1: 1021 ms</i></p>

<p><i>SODA:</i></p>

<p><i>Select 1 object SODA:
level1/1: 809 ms</i></p>

<p><i>LINQ:</i></p>

<p><i>Select 1 object LINQ:
level1/1: 915 ms</i></p>

<p><i>Native Query:</i></p>

<p><i>Select 1 object NQ:
level1/1: 1604 ms</i></p>

<p><i>Native Query Unoptimized:</i></p>

<p><i>Select 1 object NQ:
level1/1: 5008 ms</i></p>

<p>You can see that SODA query shows the best performance. The
other query types are less performant due to conversion, however they can be
easier to support and refactor. The worst performance is shown in the case of
unoptimized Native Query: in this case all the objects from the database were
instantiated and tested against the constraint.</p></div>
    </div>
    <div id="footer">
					This revision (1) was last Modified 2008-06-08T15:45:25 by Tetyana.
				</div>
  </body>
</html>