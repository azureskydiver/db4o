<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Coding Style</title>
    <link rel="stylesheet" type="text/css" href="../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Coding Style</h1><div id="TOC"><div id="TOCinner"><span class="TOCtitle">Contents</span><div class="TOCcontents"><ul><li><a href ="#File Header">File Header</a></li><li><a href ="#Naming Conventions">Naming Conventions</a><ul><li><a href ="#General Naming">General Naming</a></li><li><a href ="#Package naming">Package naming</a></li><li><a href ="#Class Naming">Class Naming</a></li><li><a href ="#Methods Naming">Methods Naming</a></li><li><a href ="#Abbreviations and Acronyms">Abbreviations and Acronyms</a></li><li><a href ="#Type Naming">Type Naming</a></li><li><a href ="#Variable Naming">Variable Naming</a></li><li><a href ="#Constants">Constants</a></li><li><a href ="#Getters/Setters">Getters/Setters</a></li><li><a href ="#Boolean Methods And Variables">Boolean Methods And Variables</a></li><li><a href ="#Initialize">Initialize</a></li><li><a href ="#Complementary Names">Complementary Names</a></li><li><a href ="#Abbreviations">Abbreviations</a></li><li><a href ="#Named Constants">Named Constants</a></li></ul></li><li><a href ="#Code Organization">Code Organization</a><ul><li><a href ="#Package Structure">Package Structure</a></li><li><a href ="#Classes and Interfaces">Classes and Interfaces</a></li><li><a href ="#Methods">Methods</a></li><li><a href ="#Wait &amp; Notify">Wait &amp; Notify</a></li><li><a href ="#Blank Lines">Blank Lines</a></li><li><a href ="#Import Declarations">Import Declarations</a></li><li><a href ="#Initialization">Initialization</a></li></ul></li><li><a href ="#Exception Handling">Exception Handling</a></li><li><a href ="#Comments">Comments</a></li></ul></li></ul></div></div></div>
Coding conventions proved to be very important for producing
maintainable and reliable code. In db4o production cycle, coding conventions have a special value, as the code ownership is spread over all the members of
the team and any developer is able to work with any piece of code. 

<p>In general, we follow <a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">Code
Conventions for the Java Programming Language</a>, however there are some
specifics, which can be useful to know for db4o users and core contributors.</p>

<p>This document is
supposed to emphasize some of the java coding style recommendations used by db4o
and explain db4o specific coding style requirements.</p>



<a name="File Header"></a><h2>File Header</h2>
<p>All code files must have copyright.The normal db4o
copyright notice should be created as the standard template in your Eclipse
workspace for db4o development. <br>Window + Preferences + Java + Code Style + Code Templates + Code + New Java Files<br><br><font color="#3f7f5f" size="2">/* Copyright (C) 2004 - 2007 db4objects Inc. http://www.db4o.com */<br><br></font><font size="2">${package_declaration}<br><br>${typecomment}<br><br>${type_declaration}</font></p>



<a name="Naming Conventions"></a><h2>Naming Conventions</h2>



<a name="General Naming"></a><h3>General Naming</h3>

<p>All names should be written in English. </p>

<p>English is the preferred language for international
development.</p>



<a name="Package naming"></a><h3>Package naming</h3>

<p>Package names should be in all lower case. </p>

<p><code>com.db4o.reflection</code></p>



<a name="Class Naming"></a><h3>Class Naming</h3>

<p>Class names should be nouns and written in mixed case
starting with lower case. </p>

<p><code>ObjectContainer, Configuration</code></p>

<a name="Methods Naming"></a><h3>Methods Naming</h3>

<p>Method names must be verbs and written in mixed case
starting with lower case. </p>

<p><code>isReadOnly(),
rename()</code></p>



<a name="Abbreviations and Acronyms"></a><h3>Abbreviations and Acronyms</h3>

<p>Abbreviations and acronyms should not be uppercase when used
as name. </p>

<p><code>IoAdapter(); // NOT: IOAdapter</code></p>

<p>Using all uppercase for the base name will give conflicts
with the naming conventions given above and will reduce the readability.</p>



<a name="Type Naming"></a><h3>Type Naming</h3>

<p>Type names must be nouns and written in mixed case starting
with upper case. </p>

<p><code>Db4oList, TransientClass</code></p>



<a name="Variable Naming"></a><h3>Variable Naming</h3>

<p>Variable names must be in mixed case starting with lower
case. Variables should have full sensible name, reflecting their purpose.</p>

<p><code>listener, objectContainer</code></p>



<ul>
<li>Private
     Variables</li>

<p>Private class variables should have underscore prefix. </p>

<p><code>public abstract
class IoAdapter {</code></p>

<p><code>&nbsp; private int _blockSize;</code></p>

<p><code>.....</code></p>

<p><code>}</code></p>

<p>Underscore prefix will help a programmer to distinguish
private class variables from local scratch variables.</p>




</ul>

<ul>
<li>Scratch
     Variables</li>

<p>Scratch variables used for iterations or indices should be
kept short. Common practice is to use i, j, k, m, n for numbers and c, d for
characters. </p>

</ul>



<a name="Constants"></a><h3>Constants</h3>

<p>Constants names (final variables) must be all uppercase
using underscore to separate words. </p>

<p><code>ACTIVATION_DEPTH,
READ_ONLY</code></p>

<p>It is a good practice
to add methods to retrieve constant values for user interface:</p>

<p><code>boolean
isReadOnly() {</code></p>

<p><code>&nbsp; return _config.getAsBoolean(READ_ONLY);</code></p>

<p><code>}</code></p>



<a name="Getters/Setters"></a><h3>Getters/Setters </h3>

<p>Normally we do not use <i>get/set</i> prefix for methods accessing attributes
directly, unless such usage adds&nbsp; valuable information:<br></p><p><code>public void
setStateDirty() {}</code></p><p>In other cases feel free to access attributes by names:</p><p><code>clientServer(), configuration()</code>&nbsp;</p>



<a name="Boolean Methods And Variables"></a><h3>Boolean Methods And Variables</h3>

<p><i>is(can, has, should)</i> prefix should be used for
boolean variables and methods. </p>

<p><code>isDirty(), canHold(reflectClass)</code></p>

<p>Using the <i>is(can, has, should)</i> prevents choosing
bad names like <i>status</i> or <i>flag</i>. <i>isStatus</i> or <i>isFlag</i>
simply doesn't fit, and the programmer is forced to choose more meaningful names.
</p>

<p>Setter methods for boolean variables must have <i>set</i>
prefix as in: </p>

<p><code>public void
setStateDirty() {}</code></p>



<a name="Initialize"></a><h3>Initialize</h3>
<p>The term <i>initialize</i> can be used where an object or
a concept is established. <code>classIndex.initialize(_targetDb);</code></p>

<p>Abbreviations like <i>init</i> must be avoided.</p>



<a name="Complementary Names"></a><h3>Complementary Names</h3>

<p>Complementary names must be used for complementary entities:</p>

<p>get/set, add/remove, create/destroy, start/stop,
insert/delete, increment/decrement, old/new, begin/end, first/last, up/down,
min/max, next/previous, old/new, open/close, show/hide, suspend/resume, etc.
For example:</p>

<p><code>startServer();</code></p>

<p><code>stopServer();</code></p>

<p>This convention helps to distinguish the borders of a
logical operation and to recognize opposite action methods.</p>



<a name="Abbreviations"></a><h3>Abbreviations </h3>

<p>Abbreviations in names should be avoided.</p>

<p><code>copyIdentity
(); // NOT: cpIdentity, NOT:copyId</code></p>

<p>However some well established and commonly used acronyms or
abbreviations must be preferred to full names:</p>

<p><code>html // NOT: HypertextMarkupLanguage</code><br>
<code>cpu // NOT: CentralProcessingUnit </code><br>
<br>
</p>

<a name="Named Constants"></a><h3>Named Constants</h3>

<p>Named constants should be used instead of:</p>

<p>&nbsp;- magic numbers:</p>

<p><code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(blockSize &gt; MAX_BLOCK_SIZE) // NOT: blockSize &gt; 256</code></p>

<p>- fixed phrases:</p>

<p><code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(fieldname == CREATIONTIME_FIELD)
// NOT if (fieldname == "i_uuid")</code></p>

<p>This convention gives a programmer an idea about the meaning
of the constant value. At the same time, it makes it easier to change the
constant value: the change must be made only in one place.&nbsp; </p>









<a name="Code Organization"></a><h2>Code Organization</h2>
<a name="Package Structure"></a><h3>Package Structure</h3>

<p>Internal class implementations should be placed in
com.db4o.internal package. This helps to keep the top-level API smaller and more understandable.<br></p>

<p><code>com.db4o.query.Evaluation</code></p>

<p>has implementation in<br></p>

<p><code>com.db4o.internal.query.PredicateEvaluation</code></p>



<a name="Classes and Interfaces"></a><h3>Classes and Interfaces</h3>

<p>Class and Interface declarations should be organized in the
following manner: </p>

<ol>
<li>Class/Interface documentation. </li>
<li><code>class</code> or <code>interface</code> statement. </li>
<li>Class (<code>static</code>) variables in the
order <code>public</code>, <code>protected</code>,&nbsp; <code>package</code>(no access modifier),  <code>private</code>.</li>
<li>Instance variables in the order&nbsp; <code>public</code>, <code>protected</code>,&nbsp; <code>package</code>(no access modifier),  <code>private</code>.</li>
<li>Constructors. </li>
<li>Methods. </li>
</ol>








<a name="Methods"></a><h3>Methods </h3>

<p>Group class methods by functionality rather than by scope or
accessibility. For example, a private class method can be in between two public
instance methods. The goal is to make reading and understanding of the code
easier.</p><a name="Wait &amp; Notify"></a><h3>Wait &amp; Notify<br></h3>
<p>Use Lock4#snooze(), #awake() instead of Object#wait directly for CF reason.</p><p><br></p>

<a name="Blank Lines"></a><h3>Blank Lines</h3>

<p>Use blank lines to separate methods, class variable
declarations of different scope, and logical units within a block of
code. Consider extracting logical blocks of code into separate methods</p>



<a name="Import Declarations"></a><h3>Import Declarations</h3>

<p>Import declarations should only include package name:. </p>

<p><code>import java.util.*; <i>// NOT: import java.util.List;</i>
</code></p>

<p>Modern IDEs, such as <a href="http://www.eclipse.org/">Eclipse</a>, provide an automated way to create
correct import statements (see "Source/Organize Imports" command in Eclipse).</p>



<a name="Initialization"></a><h3>Initialization</h3>

<p>Local variables should appear at the beginning of a code
block. (A block is any code surrounded by curly braces "{" and
"}".) Try to initialize the variable immediately to prevent using
uninitialized values. </p>

<p>The exception to the rule is indexes of <code><code>for</code></code>
loops, which in Java can be declared in the <code><code>for</code></code> statement: </p>

<p><code>for (int i = 0; i &lt; maxLoops; i++) { ... }</code></p>

<p>Avoid local declarations that hide declarations at higher
levels. For example, do not declare the same variable name in an inner block: </p>

<p><code>int count; </code></p>

<p><code>... </code></p>

<p><code>myMethod() {</code></p>

<p><code>&nbsp;&nbsp;&nbsp; if
(condition) {</code></p>

<p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int
count = 0;&nbsp;&nbsp;&nbsp;&nbsp; // AVOID! </code></p>

<p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...
</code></p>

<p><code>&nbsp;&nbsp;&nbsp; }</code></p>

<p><code>&nbsp;&nbsp;&nbsp; ... </code></p>

<p><code>} </code></p>

<a name="Exception Handling"></a><h2>Exception Handling</h2>
<p>Never use exception#printStackTrace() in db4o productive code.</p>
<p>There are three possible choices that can be used:</p>
<ul><li>throw (the base type is Db4oException)<br></li><li>swallow silently</li><li>swallow with a com.db4o.diagnostic message to the user</li></ul>



<a name="Comments"></a><h2>Comments</h2>



<p>Supply your code with javadoc comments. All public classes
and public and protected functions within public classes should be documented.
This makes it easy to keep up-to-date online code documentation. If a class or
a method is not part of public API use <code>@exlude</code> tag. For further
details, see "<a href="http://java.sun.com/javadoc/writingdoccomments">How
to Write Doc Comments for Javadoc</a>"</p>



<p>All comments should be written in English. In an
international environment, English is the preferred language.</p>



<p>Avoid using comments to explain tricky code, rather rewrite
it to make it self-explanatory. </p>



<p>For more information
see: <a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">Code
Conventions for the Java Programming Language</a>. </p>



<p>This document was compiled based on db4o team coding
practices and the following documents:</p>

<p><a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html</a></p>

<p><a href="http://geosoft.no/development/javastyle.html">http://geosoft.no/development/javastyle.html</a></p>

<p><a href="http://java.sun.com/j2se/javadoc/writingdoccomments/index.html">http://java.sun.com/j2se/javadoc/writingdoccomments/index.html</a></p>




</div>
    </div>
    <div id="footer">
					This revision (11) was last Modified 2007-06-26T16:46:33 by Tetyana.
				</div>
  </body>
</html>