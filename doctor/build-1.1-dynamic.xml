<project name="doctor" basedir="." default="publish"  xmlns:ivy="antlib:fr.jayasoft.ivy.ant">
	<import file="../build-1.1/common-1.1.xml"/>

	<property name="jarPath" value="${defaultArtifactDir}/${ant.project.name}.jar"/>
	<property name="appletJarPath" value="${defaultArtifactDir}/${ant.project.name}-applet-signed.jar"/>
	
	<path id="lib.path.id">
        <fileset dir="${dir.doctor.lib}" includes="*.jar"/>
	</path>
	
	<target name="clean">
  	<cleanIvyDir/>
	</target>
	
	<target name="init">
		<tstamp />
		<initIvyDir/>
	</target>
	
	<target name="jar" depends="init, resolve">
		<buildjar 
			srcDir="${dir.doctor.src}"
			jarPath="${jarPath}" 
			classPathRefId="lib.path.id"
			target="1.3"
			source="1.3"
		/>
		
		<buildjar 
			srcDir="${dir.doctor.src}"
			jarPath="${appletJarPath}" 
			
			target="1.3"
			source="1.3"
			compileIncludes="**/com/yetac/doctor/applet/*.java"
		/>
		<db4oSignJar jar="${appletJarPath}"/>
		
	</target>
	
	 <target name="configure" depends="init">
        <ivy:configure file="${ivy.conf.dir}/ivyconf.xml" />
   </target>
   
    <target name="resolve" depends="configure">
        <ivy:resolve file="${dir.doctor}/ivy.xml"/>
   		  <ivy:retrieve pattern="${ivy.retrieve.pattern}" conf="${ivy.configurations}" />
    </target>
    
   <target name="publish" depends="resolve, jar">
   	<copy todir="${defaultArtifactDir}">
			<fileset dir="${dir.doctor.lib}"/>
		</copy>
		
   	<publishToIvy/>
   </target>
</project>