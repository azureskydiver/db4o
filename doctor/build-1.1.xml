<project name="doctor" basedir="." default="jar"  xmlns:ivy="antlib:fr.jayasoft.ivy.ant">
	<property file="../build-1.1/machine.properties" />

	<property name="jarPath" value="artifact/${ant.project.name}.jar"/>
	
	<path id="lib.path.id">
        <fileset dir="lib" includes="*.jar"/>
	</path>
	
	<target name="clean">
		<delete dir="artifact" failonerror="true"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp />
		<mkdir dir="artifact" />
	</target>
	
	<target name="jar" depends="init">
		<property name="temp.dir" value="temp" />
			
			<delete dir="${temp.dir}" failonerror="true"/>
			<mkdir dir="${temp.dir}" />

			<javac 
				srcdir="src" 
				destdir="${temp.dir}"
				compiler="modern"
				fork="true"
				target="1.3"
				source="1.3"
				encoding="UTF-8"
			>
				<classpath refid="lib.path.id" />
			</javac>
			
			<copy todir="${temp.dir}">
				<fileset dir="src">
					<include name="com/**/*.xml" />
				</fileset>
			</copy>
			
			<jar jarfile="${jarPath}" basedir="${temp.dir}" />
			
			<delete dir="${temp.dir}" failonerror="true"/>
	</target>
</project>