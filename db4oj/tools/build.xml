<project name="db4o-tools" basedir="." default="publish"  xmlns:ivy="antlib:fr.jayasoft.ivy.ant">
	
	<import file="../../build-1.1/common-1.1.xml"/>

	<property name="jarPath" value="${defaultArtifactDir}/${ant.project.name}.jar"/>
	
	<path id="lib.path.id">
        <fileset dir="${ivy.lib.dir}" includes="*.jar"/>
	</path>
	
	<target name="clean">
  	<cleanIvyDir/>     
  	<delete dir="${ivy.lib.dir}" failonerror="true"/>
	</target>
	
	<target name="init" depends="clean">
		<tstamp />
		<initIvyDir/>
	</target>
	
	<target name="jar" depends="resolve">
		<property name="file.compiler.jdk1.3.args.optional" value="" />
		
		<delete dir="${defaultTempDir}" failonerror="true"/>
		<mkdir dir="${defaultTempDir}" />
		
		<javac compiler="classic" fork="yes" executable="${file.compiler.jdk1.3}"
			srcdir="src" destdir="${defaultTempDir}" debug="off">
			<classpath refid="lib.path.id" />
			<compilerarg line="${file.compiler.jdk1.3.args} ${file.compiler.jdk1.3.args.optional}"/>
		</javac>
		
		<jar jarfile="${jarPath}" basedir="${defaultTempDir}" />
		
		<delete dir="${defaultTempDir}" failonerror="true"/>
	</target>
	
	 <target name="configure" depends="init">
        <ivy:configure file="${ivy.conf.dir}/ivyconf.xml" />
   </target>
   
   <target name="resolve" depends="configure">
        <ivy:retrieve />
    </target>
    
    <target name="publish" depends="jar">
    	<publishToIvy/>
    </target>
</project>