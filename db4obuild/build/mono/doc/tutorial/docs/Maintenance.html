<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="docs.css">
</head>
<body><div id="pagecontainer"><table><tr><td width="5">&nbsp;</td><td><a name="Maintenance"></a><br>
<a name="outline561"></a><br><h1>19. Maintenance</h1><br>
db4o is designed to minimize maintenance tasks to the absolute&nbsp;minimum. The stored class schema adapts to the application&nbsp;automatically as it is being developed. db4o "understands"&nbsp;the addition and removal of fields which allows it to continue to&nbsp;work against modified classes without having to reorganize the&nbsp;database file. Internally db4o works with a superset of all class&nbsp;versions previously used.<br>
<br>
However there are two recommended maintenance tasks, that can&nbsp;both be fully automated remotely with API calls:<br>
<a name="Defragment"></a><br>
<ul>
<a name="outline562"></a><br><h2>19.1. Defragment</h2>Defragment creates a new database file and copies all objects&nbsp;from the current database file to the new database file. All&nbsp;indexes are recreated. The resulting database file will be&nbsp;smaller and faster. <br>
<br>
com.db4o.tools.Defragment is &nbsp;<b>only supplied as source code</b>&nbsp;to encourage embedding&nbsp;custom maintenance tasks on objects.<br>
<br>
<br>
<a name="outline563"></a><br><h2>19.2. Backup</h2><br>
db4o supplies hot backup functionality to backup single-user&nbsp;databases and client-server databases while they are running.<br>
<br>
The respective API calls for backups are:<br>
<table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td class="lg">
<code>objectContainer.ext().backup(String path)</code></td></tr></table>
<br>
<table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td class="lg">
<code>objectServer.ext().backup(String path)</code></td></tr></table>
<br>
<br>
The methods can be called while an ObjectContainer/ObjectServer&nbsp;is open and they will execute with low priority in a dedicated&nbsp;thread, with as little impact on processing performance as possible.<br>
<br>
It is recommended to backup the current development state of an&nbsp;application (ideally source code and bytecode) along with the&nbsp;database files since the old code can make it easier to work&nbsp;with the old data.<br>
<br><br><br><small>--<br>generated by </small><a href="http://www.db4objects.com/doctor/" target=_top><small>Doctor</small></a><small> courtesy of </small><a href="http://www.db4objects.com" target=_top><small>db4objects Inc.</small></a><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></td></tr></table></div></body></html>