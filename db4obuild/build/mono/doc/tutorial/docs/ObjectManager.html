<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="docs.css">
</head>
<body><div id="pagecontainer"><table><tr><td width="5">&nbsp;</td><td><a name="ObjectManager"></a><br>
<a name="outline570"></a><br><h1>22. Object Manager</h1><br>
<ul>
<a name="outline571"></a><br><h2>22.1. Introduction</h2>The db4o Object Manager provides a simple way to efficiently browse the objects&nbsp;that are stored in your database.&nbsp;&nbsp;Object Manager currently provides the&nbsp;following features:<br>
- Open either a local database file or a db4o database server<br>
- Browse objects in a database<br>
- Query for objects using a simple graphical query by example.<br>
<br>
<a name="outline572"></a><br><h2>22.2. Object Manager Tour</h2><br>
Upon opening, the Object Manager will look like the following:<br>
<br>
<img border="0" src="bare_objectmanager.gif" /><br>
<br>
At this point, you can either<br>
- Open a db4o database file<br>
- Open a connection to a db4o database server<br>
<br>
In order to open a db4o database file, simply choose "File | Open..." and&nbsp;choose the db4o database file to open.<br>
<br>
In order to open a connection to a db4o database server, choose &nbsp;"File | Connect to server...", then enter a host name, port number,&nbsp;username, and password into the resulting dialog box.<br>
<br>
When the database is open, the Object Manager will list all classes&nbsp;stored in the database in the left-hand tree pane.&nbsp;&nbsp;Expanding a tree&nbsp;item will show instances of objects in the class, then fields within the&nbsp;instance, etc.&nbsp;&nbsp;The right-hand pane will show the next level of detail&nbsp;for the item that is currently selected in the tree.<br>
<br>
For example, loading the formula1 database created by chapter 4 of this&nbsp;tutorial produces the following:<br>
<br>
<img border="0" src="objectmanager_f1c4.gif" /><br>
<br>
<ul>
<a name="outline573"></a><br><h2>22.2.1. Generic reflector versus the JDK reflector</h2><br>
You will notice in the screen shot that all objects have (G) in front of them.&nbsp;This is because the Object Manager does not know the correct classpath in order&nbsp;to load the actual Java classes that these objects represent, so it is&nbsp;displaying them generically (using the generic reflector).<br>
<br>
The Object Manager can display some data types more naturally if it has the&nbsp;class definitions available, so it provides a way to extend its classpath&nbsp;at runtime so that it can find the Java or .NET class definitions.&nbsp;&nbsp;This&nbsp;is done through the preferences dialog, accessed through "File | Preferences..."<br>
<br>
Let's add the classpath of the db4o chapter 4 tutorial classes:<br>
- Choose "File | Preferences..."<br>
- Select the "Classpath" page of the preferences dialog box<br>
- Choose the "Add directory..."<br>
- Select the directory you have selected as your output directory for compiling&nbsp;the db4o tutorial files and click OK.<br>
<br>
(You can add a Jar or zip file similarly.)<br>
<br>
Your preferences dialog should look something like the following when you are done:<br>
<br>
<img border="0" src="objectmanager_preferences.gif" /><br>
<br>
Click OK to close the Preferences dialog box.&nbsp;&nbsp;Now your tree will be refreshed,&nbsp;and you will notice that all of the (G)'s are gone.&nbsp;&nbsp;All of your&nbsp;preference settings, including your preferred classpath, are stored in a&nbsp;db4o database called&nbsp;.objectmanager.yap in your home directory.<br>
<br>
<a name="outline574"></a><br><h2>22.2.2. Querying for objects</h2><br>
You may now want to query your object database for objects based on some&nbsp;criteria.&nbsp;&nbsp;This will work using either the generic or the JDK reflector.<br>
<br>
You can open a query editor using any of the following methods:<br>
- Double-click a class name in the tree view.<br>
- Click the query button at the right side of the tool bar.<br>
- Choose "File | Query..." from the menu.<br>
<br>
If you choose either of the latter two options, you will then be presented&nbsp;with a dialog box allowing you to choose a class to query.&nbsp;&nbsp;Select a class and&nbsp;click OK to proceed.&nbsp;&nbsp;Your new query will open in a new tab.<br>
<br>
Let's query for Car objects in our formula1.yap file.&nbsp;&nbsp;Open a query editor&nbsp;using your favorite of the methods listed above.&nbsp;&nbsp;By default it will look&nbsp;like the following:<br>
<br>
<img border="0" src="objectmanager_query.gif" /><br>
<br>
You may now query for a model name, or you can descend on the "pilot" field&nbsp;by clicking the button next to the pilot field to expand the query editor to&nbsp;include a Pilot object.&nbsp;&nbsp;If you accidentally expand a class that you didn't&nbsp;intend to expand, that isn't a problem.&nbsp;&nbsp;Just leave all of the fields blank&nbsp;and they will be ignored.<br>
<br>
At this point, you can query for any combination of field values simply by&nbsp;filling appropriate values into each field.&nbsp;&nbsp;You can change the constraint&nbsp;type using the combo boxes next to each field.&nbsp;&nbsp;And you can run the query&nbsp;using the green "run" button at the top-left of the tool bar.<br>
<br>
</ul>
<a name="outline575"></a><br><h2>22.3. Known bugs and limitations</h2><br>
The following are known bugs and limitations in Object Manager and their&nbsp;workarounds:<br>
- Object Manager currently operates in read-only mode only.<br>
- If a database includes fields that have been renamed, Object Manager correctly&nbsp;browses both the old and new versions of the fields.&nbsp;&nbsp;However, queries on fields&nbsp;that have been refactored will randomly select the old or the new version of the&nbsp;field.&nbsp;&nbsp;The workaround is to browse a backup or defragmented database.<br>
- The Generic Reflector still has trouble expanding certain types of objects.&nbsp;Currently, we recommend running Object Manager with all classes available at&nbsp;all times by using the Classpath preference page to set an appropriate classpath.<br>
<br>
If something goes wrong when using Object Manager, there almost certainly will&nbsp;be detailed error messages in the Object Manager log file.&nbsp;&nbsp;This file is named&nbsp;.objectmanager.log and is stored in your user's home directory. &nbsp;If you post a question on the db4o newsgroups concerning a crash or failure&nbsp;in Object Manager, please also attach a copy of your Object Manager log file,&nbsp;so that we can efficiently diagnose the problem.&nbsp;&nbsp;This file is overwritten&nbsp;each time you run Object Manager, so please make a copy of it after an error&nbsp;occurs so that this diagnostic information is not lost.<br>
<br>
<br>
<br>
<br><br><br><small>--<br>generated by </small><a href="http://www.db4objects.com/doctor/" target=_top><small>Doctor</small></a><small> courtesy of </small><a href="http://www.db4objects.com" target=_top><small>db4objects Inc.</small></a><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></td></tr></table></div></body></html>