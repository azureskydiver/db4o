<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="docs.css">
</head>
<body><div id="pagecontainer"><table><tr><td width="5">&nbsp;</td><td><a name="Encryption"></a><br>
<a name="outline544"></a><br><h1>17. Encryption</h1><br>
db4o provides built-in encryption functionality.<br>
<br>
In order to use it, the following two methods have&nbsp;to be called, before a database file is created: <br>
<table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td class="lg">
<code>Db4o.configure().encrypt(true); <br>
Db4o.configure().password("yourEncryptionPasswordHere");</code></td></tr></table>
<br>
<br>
The security standard of the built-in encryption functionality&nbsp;is not very high, not much more advanced than&nbsp;"substract 5 from every byte".<br>
<br>
There are 2 reasons for not providing more advanced encryption&nbsp;functionality:<br>
(1) The db4o library is designed to stay small and portable.<br>
(2) The db4o team is determined to avoid problems with U.S.&nbsp;security regulations and export restrictions. <br>
<br>
db4o still provides a solution for high-security encryption by&nbsp;allowing any user to choose his own encryption mechanism that&nbsp;he thinks he needs:<br>
The db4o file IO mechanism is pluggable and any fixed-length&nbsp;encryption mechanism can be added. All that needs&nbsp;to be done is to write an IoAdapter plugin for db4o file IO.<br>
<br>
This is a lot easier than it sounds. Simply:<br>
- take the sources of com.db4o.io.RandomAccessFileAdapter as an example<br>
- write your own IoAdapter implementation that delegates raw file&nbsp;access to another adapter using the GoF decorator pattern.<br>
- Implement the #read() and #write() methods to encrypt and decrypt&nbsp;when bytes are being exchanged with the file<br>
- plug your adapter into db4o with the following method:<br>
<table width="100%" cellpadding="3" cellspacing="0" border="0"><tr><td class="lg">
<code>Db4o.configure().io(new MyEncryptionAdapter());</code></td></tr></table>
<br>
<br>
However, you'll have to keep in mind that db4o will write partial udates.&nbsp;For example, it may write a full object and then only modify one field&nbsp;entry later one. Therefore it is not sufficient to en-/decrypt each access&nbsp;in isolation. You'll rather have to make up a tiling structure that defines&nbsp;the data chunks that have to be en-/decrypted together.<br>
<br>
Another method to inject encryption capabilities into db4o for instances&nbsp;of specific classes only is to implement and configure an en-/decrypting&nbsp;translator.<br><br><br><small>--<br>generated by </small><a href="http://www.db4objects.com/doctor/" target=_top><small>Doctor</small></a><small> courtesy of </small><a href="http://www.db4objects.com" target=_top><small>db4objects Inc.</small></a><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></td></tr></table></div></body></html>