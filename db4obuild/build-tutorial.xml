<project name="db4otutorial" default="doctortutorial" basedir=".">
	
	<!--
	
	
	
	-->
	<import file="common.xml" />
	<property file="machine.properties" />
	<property file="ant.properties" />
	
	
	<taskdef name="doctor" classname="com.yetac.doctor.Doctor">
		<classpath>
			<pathelement location="${dir.doctor.bin}" />
			<pathelement location="${dir.doctor.lib}/iText.jar" />
			<pathelement location="${dir.j.bin}" />
			<path path="${path.classpath.full}" />
		</classpath>
	</taskdef>
	
	<target name="doctortutorial" description="Run doctor on the tutorial while editing">
		<doctor 
			name="f1" 
			home="${dir.j.tutorial}" 
			interactive="true" 
			workspace="${dir.base}" 
			inputsource="${dir.j.tutorial.src}/" 
			sourceextension="java" 
			outputfile="${db4o.file}tutorial" 
			outputpath="${dir.j.tutorial.out.java}" 
			pdfbasefont="${font.pdf.base}" 
			archive="${filename.doctor.applets.jar}, ${filename.jdk1.5.jar}, ${filename.jdk1.5.cs.jar}, ${filename.db4obench.jar}, ${filename.tutorial.jar}"
			outlineimage="db4objects.gif" 
			linkhome="http://www.db4o.com">
			<variable name="java" boolean="true" />
			<variable name="net" boolean="false" />
			<pattern name="version" value="6.2" />
			<ignoreinputfolder name="net" />
		</doctor>
		<copy todir="${dir.j.tutorial.out.java}/docs" overwrite="true">
			<fileset dir="${dir.dist.doctor}">
				<include name="*.jar" />
			</fileset>
			<fileset dir="${dir.dist.jars}">
				<include name="${filename.jdk1.5.jar}" />
				<include name="${filename.jdk1.5.cs.jar}" />
			</fileset>
		</copy>
		<signjar jar="${dir.j.tutorial.out.java}/docs/${filename.jdk1.5.jar}" alias="db4objects" keypass="kistoa" storepass="kistoa">
		</signjar>
		<signjar jar="${dir.j.tutorial.out.java}/docs/${filename.jdk1.5.cs.jar}" alias="db4objects" keypass="kistoa" storepass="kistoa">
				</signjar>
		<doctor 
			name="f1" 
			home="${dir.j.tutorial}" 
			interactive="true" 
			workspace="${dir.base}" 
			inputsource="${dir.n.v6.tutorial.src}/" 
			sourcepathresolver="com.yetac.doctor.cmd.DotNetTutorialSourcePathResolver"
			sourceextension="cs" 
			outputfile="db4o-${db4o.version.dotted}-tutorial" 
			outputpath="${dir.j.tutorial.out.net}" 
			pdfbasefont="${font.pdf.base}" 
			archive="${filename.doctor.applets.jar}, ${filename.jdk1.5.jar}, ${filename.jdk1.5.cs.jar}, ${filename.db4obench.jar}, ${filename.tutorial.jar}" 
			outlineimage="db4objects.gif" 
			linkhome="http://www.db4o.com">
			<variable name="java" boolean="false" />
			<variable name="net" boolean="true" />
			<variable name="mono" boolean="false" />
			<pattern name="version" value="6.2" />
			<ignoreinputfolder name="java" />
			<ignoreinputfolder name="mono" />
		</doctor>
		
		<exec executable="cmd" dir="${dir.j.tutorial.out.net}">
			<arg value="/k start index.html"/>
		</exec>
	</target>
</project>