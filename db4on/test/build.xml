<?xml version="1.0"?>
<project name="db4o40ntest" default="run">

	<property name="db4o.dll" location="../db4odevtools/dist/net/dll/db4o-4.0-net1.dll" />
	<property name="db4otools.dll" location="../db4o40ntools/bin/db4o-4.0-net1-tools.dll" />
	
	<property name="build.dir" location="bin" />
	
	<target name="run" depends="build">
		<exec executable="${build.dir}/db4o-4.0-net1-test.exe" dir="${build.dir}">
		</exec>
	</target>
	
	<target name="build" depends="init">
		<csc		
			targetType="winexe"
			destFile="${build.dir}/db4o-4.0-net1-test.exe"
			mainclass="com.db4o.test.AllTests">		
			<src dir="src">
				<include name="**/*.cs" />
			</src>
			
			<reference dir="${build.dir}">			
				<include name="db4o-4.0-net1.dll" />
				<include name="db4o-4.0-net1-tools.dll" />
			</reference>
		</csc>
	</target>
	
	<target name="init">
		<mkdir dir="${build.dir}" />
		<copy todir="${build.dir}" file="${db4o.dll}" />
		<copy todir="${build.dir}" file="${db4otools.dll}" />
	</target>
	
	<target name="clean">
		<delete dir="${build.dir}" />
	</target>

</project>
